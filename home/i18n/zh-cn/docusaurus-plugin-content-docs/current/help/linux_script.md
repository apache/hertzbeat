---
id: linux_script
title: 监控：使用脚本监控 Linux 操作系统   
sidebar_label: 使用脚本监控 Linux 操作系统
keywords: [开源监控系统, 开源网络监控, 使用脚本监控 Linux 操作系统]
---

### 准备工作

> 若要监控本机，部署 Hertzbeat 即可，若要监控其他主机，需在目标主机上部署采集器，部署采集器可参考[此链接](https://github.com/apache/hertzbeat?tab=readme-ov-file#2install-via-package)的第 5 步。
> 如果使用 Docker 安装采集器，则会导致采集器监控不到宿主机上的进程信息，因为 Docker 容器在一个独立的环境中运行，每个容器都有自己的进程空间。
> 在创建监控任务选择采集器时，需选择目标主机上对应的采集器。

### 配置参数

| 参数名称   |             参数帮助描述              |
|:-------|---------------------------------|---|
| 监控 Host | 被监控的对端 IPV4，IPV6 或域名。注意⚠️不带协议头(eg: https://, http://)。           |
| 任务名称   | 标识此监控的名称，名称需要保证唯一性。             |   |
| 采集器    | 配置此监控使用哪台采集器调度采集。               |
| 监控周期   | 监控周期性采集数据间隔时间，单位秒。 |
| 绑定标签   | 对监控资源的分类管理标签。                   |
| 描述备注   | 更多标识和描述此监控的备注信息，用户可以在这里备注信息。    |

### 采集指标

#### 指标集合：basic

| 指标名称     | 指标单位 | 指标帮助描述 |
|----------|------|--------|
| hostname | 无    | 主机名称   |
| version  | 无    | 操作系统版本 |
| uptime   | 无    | 系统启动时间 |

#### 指标集合：cpu

| 指标名称           | 指标单位 | 指标帮助描述                |
|----------------|------|-----------------------|
| info           | 无    | CPU 型号                |
| cores          | 核数   | CPU 内核数量              |
| interrupt      | 个数   | CPU 中断数量              |
| load           | 无    | CPU 最近 1/5/15 分钟的平均负载 |
| context_switch | 个数   | 当前上下文切换数量             |
| usage          | %    | CPU 使用率               |

#### 指标集合：memory

|    指标名称    | 指标单位 |  指标帮助描述  |
|------------|------|----------|
| total      | Mb   | 总内存容量    |
| used       | Mb   | 用户程序内存量  |
| free       | Mb   | 空闲内存容量   |
| buff_cache | Mb   | 缓存占用内存   |
| available  | Mb   | 剩余可用内存容量 |
| usage      | %    | 内存使用率    |

#### 指标集合：disk

|     指标名称      | 指标单位 |  指标帮助描述   |
|---------------|------|-----------|
| disk_num      | 块数   | 磁盘总数      |
| partition_num | 分区数  | 分区总数      |
| block_write   | 块数   | 写入磁盘的总块数  |
| block_read    | 块数   | 从磁盘读出的块数  |
| write_rate    | iops | 每秒写磁盘块的速率 |

#### 指标集合：interface

|      指标名称      | 指标单位 |    指标帮助描述     |
|----------------|------|---------------|
| interface_name | 无    | 网卡名称          |
| receive_bytes  | byte | 入站数据流量(bytes) |
| transmit_bytes | byte | 出站数据流量(bytes) |

#### 指标集合：disk_free

|    指标名称    | 指标单位 | 指标帮助描述  |
|------------|------|---------|
| filesystem | 无    | 文件系统的名称 |
| used       | Mb   | 已使用磁盘大小 |
| available  | Mb   | 可用磁盘大小  |
| usage      | %    | 使用率     |
| mounted    | 无    | 挂载点目录   |

#### 指标集合：CPU 占用率前10的程序

| 指标名称    | 指标单位 | 指标帮助描述  |
|---------|------|---------|
| id      | 无    | 进程 id   |
| cpu     | %    | cpu 占用率 |
| ws      | %    | 内存占用率   |
| command | 无    | 执行的命令   |

#### 指标集合：内存占用率前10的程序

| 指标名称    | 指标单位 | 指标帮助描述  |
|---------|------|---------|
| id      | 无    | 进程 id   |
| cpu     | %    | cpu 占用率 |
| ws      | %    | 内存占用率   |
| command | 无    | 执行的命令   |
