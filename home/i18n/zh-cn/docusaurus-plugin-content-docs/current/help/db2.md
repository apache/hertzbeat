---
id: db2
title: 监控：DB2数据库监控
sidebar_label: DB2数据库
keywords: [ 开源监控系统, 开源数据库监控, DB2数据库监控 ]
---


> 对 DB2 数据库的通用性能指标（表空间、会话状态、进程数、锁、慢查询等）进行采集监控

### 注意, 必须添加 DB2 jdbc 驱动 jar

- 下载 DB2 jdbc 驱动 jar
  包，例如 [jcc.jar](https://repo1.maven.org/maven2/com/ibm/db2/jcc/11.5.9.0/jcc-11.5.9.0.jar)
- 将 jar 包复制到 `hertzbeat/ext-lib` 目录下
- 重启 HertzBeat 服务

### 配置参数

以下是 DB2 监控所需的配置参数：

| 参数名称       | 参数帮助描述                                   |
|:-----------|:-----------------------------------------|
| **目标Host** | 被监控的 DB2 数据库服务器的 IPv4、IPv6 或域名           |
| **端口**     | DB2 数据库对外提供的端口，默认为 `50000`               |
| **数据库名**   | 要连接的 DB2 数据库的名称                          |
| **用户名**    | 数据库连接用户名                                 |
| **密码**     | 数据库连接密码                                  |
| **查询超时时间** | 设置 SQL 查询未响应数据时的超时时间，单位毫秒 (ms)，默认 `6000` |
| **复用连接**   | 是否复用数据库连接，布尔值，默认 `true`                  |
| **URL**    | 数据库连接 URL，可选，配置后将覆盖上面配置的数据库名、用户名、密码等参数   |

### 采集指标

#### 指标集合：基本信息

| 指标名称               | 指标单位 | 指标帮助描述 |
|:-------------------|:-----|:-------|
| `database_version` | 无    | 数据库版本  |
| `instance_name`    | 无    | 数据库实例名 |
| `status`           | 无    | 实例状态   |
| `num_db`           | 无    | 数据库数量  |

#### 指标集合：表空间使用率

| 指标名称              | 指标单位   | 指标帮助描述 |
|:------------------|:-------|:-------|
| `tablespace_name` | 无      | 表空间名   |
| `status`          | 无      | 类型     |
| `total`           | MB     | 总容量    |
| `used`            | MB     | 已使用容量  |
| `free`            | MB     | 空闲容量   |
| `used_percentage` | 百分比(%) | 已用百分比  |

#### 指标集合：会话状态

| 指标名称          | 指标单位 | 指标帮助描述     |
|:--------------|:-----|:-----------|
| `status_type` | 无    | 会话状态类型     |
| `count`       | 无    | 处于该状态的会话数量 |

#### 指标集合：应用进程数

| 指标名称            | 指标单位 | 指标帮助描述       |
|:----------------|:-----|:-------------|
| `process_count` | 无    | 总的应用进程数/会话总数 |

#### 指标集合：锁

| 指标名称            | 指标单位 | 指标帮助描述       |
|:----------------|:-----|:-------------|
| `waiting_locks` | 无    | 当前处于等待状态的锁数量 |

#### 指标集合：慢查询

| 指标名称           | 指标单位 | 指标帮助描述      |
|:---------------|:-----|:------------|
| `avg_exe_time` | ms   | 平均执行时间      |
| `sql_text`     | 无    | 慢查询的 SQL 文本 |
