---
id: log_manage
title: 日志管理
sidebar_label: 日志管理
keywords: [开源监控, 日志管理, 日志查询, 日志统计, 日志删除]
---

> HertzBeat 的日志管理功能提供了完整的日志数据管理能力，包括日志查询、统计分析、批量删除等操作。用户可以通过多种过滤条件精确查找日志，查看详细的统计图表，并对不需要的日志数据进行清理。

## 前置要求

**在使用日志管理功能之前，必须先配置支持日志存储的数据库。**

## 功能概览

在 HertzBeat 界面中，进入"日志" -> "日志管理"页面，你将看到一个功能完整的日志管理界面。

![log_manage](/img/docs/help/log_manage_cn.png)

## 日志查询功能

### 过滤条件

日志管理支持以下过滤条件进行精确查询：

| 过滤条件 | 字段名称 | 数据类型 | 用途说明 | 示例值 | 使用场景 |
|---------|---------|---------|---------|--------|---------|
| **时间范围** | `timestamp` | 日期时间 | 指定查询的时间窗口 | `2024-01-01 00:00:00` 至 `2024-01-02 00:00:00` | 问题时段定位、性能分析 |
| **跟踪ID** | `traceId` | 字符串 | 分布式系统请求链路跟踪 | `1234567890abcdef` | 链路追踪、请求流程分析 |
| **跨度ID** | `spanId` | 字符串 | 跟踪中特定操作标识 | `abcdef1234567890` | 微服务调用分析 |
| **严重程度编号** | `severityNumber` | 数字 | OpenTelemetry 标准级别 | `1-24` | 按数字级别过滤 |
| **严重程度文本** | `severityText` | 字符串 | 人类可读的日志级别 | `ERROR`、`WARN`、`INFO` | 按级别快速筛选 |

### 可视化分析图表

可视化分析图表包括基础统计指标图与聚合统计图，点击显示统计按钮可展开查看。

![log_manage_chart](/img/docs/help/log_manage_chart_cn.png)

#### 基础统计指标

| 统计指标 | 含义说明 | 应用价值 | 异常阈值参考 |
|---------|---------|---------|-------------|
| **总日志数** | 符合查询条件的日志总量 | 评估系统活跃度和数据规模 | 突然增减超过50%需关注 |
| **FATAL 日志数** | 致命错误级别日志统计 | 识别系统严重故障 | 任何FATAL日志都需立即处理 |
| **ERROR 日志数** | 错误级别日志统计 | 监控系统异常情况 | 超过总日志5%需要关注 |
| **WARN 日志数** | 警告级别日志统计 | 发现潜在问题和性能瓶颈 | 持续增长趋势需要分析 |
| **INFO 日志数** | 信息级别日志统计 | 了解系统正常运行状态 | 占比应为日志主体 |
| **DEBUG 日志数** | 调试级别日志统计 | 开发调试和问题排查 | 生产环境应控制数量 |

#### 聚合统计图

| 图表名称 | 图表类型 | 展示内容 | 主要用途 | 包含指标/级别 |
|---------|---------|---------|---------|-------------|
| **严重程度分布图** | 饼图 | 不同日志级别的数量分布 | 快速了解日志严重程度分布情况 | FATAL、ERROR、WARN、INFO、DEBUG |
| **跟踪覆盖率图** | 饼图 | 带有跟踪信息的日志比例 | 分析系统跟踪覆盖情况 | 带 Trace ID 的日志数量<br/>带 Span ID 的日志数量<br/>同时带 Trace 和 Span 的日志数量<br/>无跟踪信息的日志数量 |
| **日志趋势图** | 时间线图 | 按小时统计的日志数量变化趋势 | 分析日志产生的时间模式和异常峰值 | 时间粒度：小时级别统计<br/>分析维度：时间模式识别、异常峰值检测 |

### 列显示配置

点击"列设置"按钮可以自定义表格显示的列：

- **时间**：日志生成时间戳
- **观察时间**：日志被观察到的时间
- **严重程度**：日志级别标签
- **日志内容**：主要消息内容
- **属性**：日志附加属性信息
- **资源**：资源相关信息
- **Trace ID**：分布式跟踪标识
- **Span ID**：操作跨度标识
- **Trace 标记**：跟踪标记信息
- **instrumentation scope 信息**：instrumentation scope 信息
- **丢弃计数**：丢弃的属性数量

## 日志详情查看

点击表格中的任意日志条目可打开详情弹窗：

![log_manage](/img/docs/help/log_manage_log_details_cn.png)

### 基本信息区域

- **严重程度**：显示级别标签和颜色标识
- **时间戳**：格式化显示的详细时间
- **跟踪ID**：完整的分布式跟踪标识符
- **跨度ID**：完整的操作跨度标识符

### 完整JSON数据

- **原始数据**：显示日志条目的完整 JSON 格式
- **复制功能**：支持一键复制到剪贴板
- **格式化显示**：JSON 数据进行了格式化处理便于阅读

## 批量删除功能

1. **选择日志**：通过表格左侧的复选框选择需要删除的日志
2. **全选功能**：使用表头的复选框可以全选当前页面的日志
3. **批量删除**：点击"批量删除"按钮删除选中的日志
4. **删除计数**：按钮上显示当前选中的日志数量

## 故障排除

### 无法查看日志

**症状**：页面显示"无数据"或加载失败
**解决方案**：

1. 检查是否已正确配置时序数据库
2. 确认数据库服务正常运行
3. 验证数据库连接配置是否正确
4. 检查是否有日志数据写入数据库

如需了解更多日志管理功能或遇到技术问题，欢迎通过 [GitHub Issues](https://github.com/apache/hertzbeat/issues) 与社区交流。
