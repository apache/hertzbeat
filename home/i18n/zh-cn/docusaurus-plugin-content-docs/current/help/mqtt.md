---
id: mqtt
title: 监控：MQTT 连接
sidebar_label: MQTT 连接
keywords: [ 开源监控系统, MQTT连接监控 ]
---

> 对MQTT连接状态进行监控，支持 MQTT5 和 MQTT3.1.1 协议。

**协议使用：mqtt**

:::tip
为了检测是否可以正常订阅主题，HertzBeat 会订阅主题，然后立即取消订阅；为了检测是否可以正常推送消息，HertzBeat 会推送一条测试消息到主题（如果测试消息参数为空则不作检测）。
请确保这些操作不会对你的系统产生影响。
:::

### 配置参数

| 参数名称      | 参数帮助描述                                                  |
|-----------|---------------------------------------------------------|
| MQTT的Host | 被监控的对端 IPV4，IPV6 或域名。注意⚠️不带协议头(eg: https://, http://)。  |
| 任务名称      | 标识此监控的名称，名称需要保证唯一性。                                     |
| 端口        | MQTT 服务开放端口，默认为1883。                                    |
| 协议版本      | MQTT 协议版本，支持 MQTT5 和 MQTT3.1.1。                         |
| 连接超时时间    | 连接超时时间，单位ms毫秒，默认6000毫秒。                                 |
| 客户端ID     | MQTT 客户端 ID，默认为 `hertzbeat-mqtt-client`。                |
| 主题        | 监控的主题。                                                  |
| 测试消息      | 测试主题是否可以正常推送消息使用的消息内容。（可选，如果为空则 `canPublish` 一直为false ） |
| 用户名       | MQTT 认证用户名（可选）。                                         |
| 密码        | MQTT 认证密码（可选）。                                          |
| 采集间隔      | 监控周期性采集数据间隔时间，单位秒，可设置的最小间隔为30秒                          |
| 绑定标签      | 用于对监控资源进行分类管理                                           |
| 描述备注      | 更多标识和描述此监控的备注信息，用户可以在这里备注信息                             |

### 采集指标

#### 指标集合：概要

| 指标名称         | 指标单位 | 指标帮助描述        |
|--------------|------|---------------|
| responseTime | 无    | 响应时间          |
| canPublish   | 无    | 是否可以正常推送消息到主题 |
| canDescribe  | 无    | 主题是否可以正常被订阅   |
