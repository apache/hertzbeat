"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[26964],{77108(e,n,l){l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"help/plugin","title":"\u81ea\u5b9a\u4e49\u63d2\u4ef6(Beta)","description":"\u7b80\u4ecb","source":"@site/i18n/zh-cn/docusaurus-plugin-content-docs/current/help/plugin.md","sourceDirName":"help","slug":"/help/plugin","permalink":"/zh-cn/docs/next/help/plugin","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/i18n/zh-cn/docusaurus-plugin-content-docs/current/help/plugin.md","tags":[],"version":"current","frontMatter":{"id":"plugin","title":"\u81ea\u5b9a\u4e49\u63d2\u4ef6(Beta)","sidebar_label":"\u81ea\u5b9a\u4e49\u63d2\u4ef6(Beta)"},"sidebar":"docs","previous":{"title":"\u81ea\u5b9a\u4e49\u770b\u677f","permalink":"/zh-cn/docs/next/help/bulletin"},"next":{"title":"\u65f6\u95f4\u8868\u8fbe\u5f0f","permalink":"/zh-cn/docs/next/help/time_expression"}}');var t=l(86070),r=l(60056);const s={id:"plugin",title:"\u81ea\u5b9a\u4e49\u63d2\u4ef6(Beta)",sidebar_label:"\u81ea\u5b9a\u4e49\u63d2\u4ef6(Beta)"},c=void 0,o={},d=[{value:"\u7b80\u4ecb",id:"\u7b80\u4ecb",level:3},{value:"\u652f\u6301\u7684\u63d2\u4ef6\u7c7b\u578b",id:"\u652f\u6301\u7684\u63d2\u4ef6\u7c7b\u578b",level:3},{value:"\u5f00\u53d1\u6b65\u9aa4 \uff08\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u544a\u8b66\u540e\u63d2\u4ef6\u4e3a\u4f8b\uff09",id:"\u5f00\u53d1\u6b65\u9aa4-\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u544a\u8b66\u540e\u63d2\u4ef6\u4e3a\u4f8b",level:3},{value:"\u5b9a\u4e49\u63d2\u4ef6\u53c2\u6570",id:"\u5b9a\u4e49\u63d2\u4ef6\u53c2\u6570",level:3}];function a(e){const n={admonition:"admonition",code:"code",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h3,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"}),"\n",(0,t.jsxs)(n.p,{children:["\u5f53\u524d",(0,t.jsx)(n.code,{children:"HertzBeat"}),"\u5728\u4f7f\u7528\u4e2d\uff0c\u53ea\u6709\u5728\u544a\u8b66\u540e\u901a\u8fc7\u901a\u77e5\u529f\u80fd\u4e0e\u5916\u90e8\u7cfb\u7edf\u4ea7\u751f\u4ea4\u4e92\uff0c\u63d2\u4ef6\u529f\u80fd\u652f\u6301\u8ba9\u7528\u6237\u5728 ",(0,t.jsx)(n.code,{children:"HertzBeat"})," \u751f\u547d\u5468\u671f\u7684\u5404\u4e2a\u9636\u6bb5\u589e\u52a0\u81ea\u5b9a\u4e49\u64cd\u4f5c\u3002\u5982\u5728\u544a\u8b66\u540e\u6267\u884c",(0,t.jsx)(n.code,{children:"sql"}),"\u3001",(0,t.jsx)(n.code,{children:"shell"}),"\u811a\u672c\u7b49\u64cd\u4f5c\uff0c\u5728\u91c7\u96c6\u5230\u76d1\u63a7\u6570\u636e\u540e\u53d1\u9001\u5230\u5176\u4ed6\u7684\u7cfb\u7edf\u7b49\u3002\n\u7528\u6237\u6309\u7167\u81ea\u5b9a\u4e49\u63d2\u4ef6\u7684\u6d41\u7a0b\u5f00\u53d1\u63d2\u4ef6\u5e76\u6253\u5305\u540e\uff0c\u5c06\u6253\u5305\u540e\u7684\u6587\u4ef6\u901a\u8fc7 ",(0,t.jsx)(n.code,{children:"\u63d2\u4ef6\u7ba1\u7406"})," - ",(0,t.jsx)(n.code,{children:"\u4e0a\u4f20\u63d2\u4ef6"})," \u529f\u80fd\uff0c\u4e0a\u4f20\u5e76\u542f\u7528\u63d2\u4ef6\u5373\u53ef\u5728\u4e0d\u91cd\u542f",(0,t.jsx)(n.code,{children:"HertzBeat"}),"\u7684\u60c5\u51b5\u4e0b\u589e\u52a0\u81ea\u5b9a\u4e49\u529f\u80fd\u3002"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"\u5728\u5f53\u524d\u7248\u672c\u4e2d,\u81ea\u5b9a\u4e49\u63d2\u4ef6\u4f5c\u4e3a\u4e00\u4e2a\u6d4b\u8bd5\u529f\u80fd,\u53ef\u80fd\u4f1a\u6709\u4e00\u4e9b\u9650\u5236\u548c\u4e0d\u7a33\u5b9a\u6027,\u540e\u7eed\u7248\u672c\u53ef\u80fd\u4f1a\u91cd\u6784\u63d2\u4ef6\u529f\u80fd\u3002`"})}),"\n",(0,t.jsx)(n.h3,{id:"\u652f\u6301\u7684\u63d2\u4ef6\u7c7b\u578b",children:"\u652f\u6301\u7684\u63d2\u4ef6\u7c7b\u578b"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Post-Alert"}),"\u63d2\u4ef6","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4f5c\u7528\uff1a\u5728\u544a\u8b66\u540e\u6267\u884c\u81ea\u5b9a\u4e49\u64cd\u4f5c"}),"\n",(0,t.jsxs)(n.li,{children:["\u5b9e\u73b0\u63a5\u53e3\uff1a",(0,t.jsx)(n.code,{children:"org.apache.hertzbeat.plugin.PostAlertPlugin"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Post-Collect"}),"\u63d2\u4ef6","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4f5c\u7528\uff1a\u5728\u91c7\u96c6\u540e\u6267\u884c\u81ea\u5b9a\u4e49\u64cd\u4f5c"}),"\n",(0,t.jsxs)(n.li,{children:["\u5b9e\u73b0\u63a5\u53e3\uff1a",(0,t.jsx)(n.code,{children:"org.apache.hertzbeat.plugin.PostCollectPlugin"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"\u4e3a\u4e86\u4fdd\u8bc1\u63d2\u4ef6\u529f\u80fd\u6e05\u6670\uff0c\u6613\u4e8e\u7ba1\u7406\uff0c\u6211\u4eec\u5efa\u8bae\u4e14\u53ea\u652f\u6301\u4e00\u4e2a\u63d2\u4ef6\u4e2d\u53ea\u5305\u542b\u4e00\u79cd\u63d2\u4ef6\u7c7b\u578b\u63a5\u53e3\u7684\u4e00\u4e2a\u5b9e\u73b0\u3002"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5982\u9700\u5728\u91c7\u96c6\u3001\u542f\u52a8\u7a0b\u5e8f\u7b49\u65f6\u673a\u8bbe\u7f6e\u89e6\u53d1\u65b9\u6cd5\uff0c\u8bf7\u5728",(0,t.jsx)(n.code,{children:"https://github.com/apache/hertzbeat/issues/new/choose"})," \u63d0",(0,t.jsx)(n.code,{children:"Task"})]}),"\n",(0,t.jsx)(n.h3,{id:"\u5f00\u53d1\u6b65\u9aa4-\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u544a\u8b66\u540e\u63d2\u4ef6\u4e3a\u4f8b",children:"\u5f00\u53d1\u6b65\u9aa4 \uff08\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u544a\u8b66\u540e\u63d2\u4ef6\u4e3a\u4f8b\uff09"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u62c9\u53d6\u4e3b\u5206\u652f\u4ee3\u7801 ",(0,t.jsx)(n.code,{children:"git clone https://github.com/apache/hertzbeat.git"})," \uff0c\u5b9a\u4f4d\u5230",(0,t.jsx)(n.code,{children:"plugin"}),"\u6a21\u5757\u7684\n",(0,t.jsx)(n.code,{children:"Plugin"}),"\u63a5\u53e3\u3002\n",(0,t.jsx)(n.img,{alt:"plugin-1.png",src:l(5273).A+"",width:"1414",height:"802"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u5728",(0,t.jsx)(n.code,{children:"org.apache.hertzbeat.plugin.impl"}),"\u76ee\u5f55\u4e0b\uff08\u5982\u679c\u6ca1\u6709\u8bf7\u81ea\u884c\u521b\u5efa\uff09, \u65b0\u5efa\u4e00\u4e2a ",(0,t.jsx)(n.code,{children:"org.apache.hertzbeat.plugin.PostAlertPlugin"})," \u5b9e\u73b0\u7c7b\uff0c\u5982",(0,t.jsx)(n.code,{children:"org.apache.hertzbeat.plugin.impl.DemoPlugin"}),",\u5728\u5b9e\u73b0\u7c7b\u4e2d\u63a5\u6536",(0,t.jsx)(n.code,{children:"Alert"}),"\n\u7c7b\u4f5c\u4e3a\u53c2\u6570\uff0c\u5b9e\u73b0",(0,t.jsx)(n.code,{children:"execute"}),"\u65b9\u6cd5\uff0c\u903b\u8f91\u7531\u7528\u6237\u81ea\u5b9a\u4e49\uff0c\u8fd9\u91cc\u6211\u4eec\u7b80\u5355\u6253\u5370\u4e00\u4e0b\u5bf9\u8c61\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'  package org.apache.hertzbeat.plugin.impl;\n  \n  import org.apache.hertzbeat.common.entity.alerter.Alert;\n  import org.apache.hertzbeat.common.entity.plugin.PluginContext;\n  import org.apache.hertzbeat.plugin.PostAlertPlugin;\n  import org.slf4j.Logger;\n  import org.slf4j.LoggerFactory;\n  \n  \n  public class DemoPlugin implements PostAlertPlugin {\n  \n      private static final Logger log = LoggerFactory.getLogger(DemoPlugin.class);\n  \n      @Override\n      public void execute(Alert alert, PluginContext pluginContext) {\n          log.info("DemoPlugin alert: {}", alert);\n          log.info("DemoPlugin pluginContext: {}", pluginContext);\n      }\n  }\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u5728 ",(0,t.jsx)(n.code,{children:"META-INF/services/org.apache.hertzbeat.plugin.PostAlertPlugin"})," \uff08\u5982\u679c\u6ca1\u6709\u8bf7\u81ea\u884c\u521b\u5efa\uff09 \u6587\u4ef6\u4e2d\u589e\u52a0\u63a5\u53e3\u5b9e\u73b0\u7c7b\u7684\u5168\u9650\u5b9a\u540d\uff0c\u6bcf\u4e2a\u5b9e\u73b0\u7c7b\u5168\u9650\u5b9a\u540d\u5355\u72ec\u6210\u884c\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"org.apache.hertzbeat.plugin.impl.DemoPluginImpl\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u6253\u5305 ",(0,t.jsx)(n.code,{children:"hertzbeat-plugin"})," \u6a21\u5757\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cd plugin\nmvn package\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u901a\u8fc7 ",(0,t.jsx)(n.code,{children:"\u63d2\u4ef6\u7ba1\u7406"}),"-",(0,t.jsx)(n.code,{children:"\u4e0a\u4f20\u63d2\u4ef6"})," \u529f\u80fd\uff0c\u4e0a\u4f20\u4ee5 ",(0,t.jsx)(n.code,{children:"-jar-with-lib.jar"})," \u7ed3\u5c3e\u7684\u63d2\u4ef6\u5305\uff0c\u542f\u7528\u63d2\u4ef6\u5373\u53ef\u5728\u544a\u8b66\u540e\u6267\u884c\u81ea\u5b9a\u4e49\u64cd\u4f5c\u3002"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u5b9a\u4e49\u63d2\u4ef6\u53c2\u6570",children:"\u5b9a\u4e49\u63d2\u4ef6\u53c2\u6570"}),"\n",(0,t.jsxs)(n.p,{children:["\u63d2\u4ef6\u529f\u80fd\u652f\u6301\u81ea\u5b9a\u4e49\u53c2\u6570\uff0c\u5e76\u4e14\u5728\u4f7f\u7528\u63d2\u4ef6\u65f6\u53ef\u4ee5\u901a\u8fc7",(0,t.jsx)(n.code,{children:"\u63d2\u4ef6\u7ba1\u7406"})," - ",(0,t.jsx)(n.code,{children:"\u7f16\u8f91\u53c2\u6570"})," \u529f\u80fd\u586b\u5199\u63d2\u4ef6\u8fd0\u884c\u65f6\u9700\u8981\u7684\u53c2\u6570\u3002\n\u4e0b\u9762\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u5305\u542b\u4e24\u4e2a\u53c2\u6570\u7684\u63d2\u4ef6\u4e3a\u4f8b\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u5b9a\u4e49\u63d2\u4ef6\u53c2\u6570\u7684\u6d41\u7a0b\uff1a"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u5728 ",(0,t.jsx)(n.code,{children:"define"})," \u76ee\u5f55\u4e0b\u589e\u52a0\u53c2\u6570\u5b9a\u4e49\u6587\u4ef6 \uff0c\u6ce8\u610f\u53c2\u6570\u5b9a\u4e49\u6587\u4ef6\u5fc5\u987b\u662f\u540d\u79f0\u4e3a define \u5f00\u5934\u7684 yml \u6587\u4ef6\uff0c\u4f8b\u5982 ",(0,t.jsx)(n.code,{children:"define-demo.yml"}),";"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["\u5728 ",(0,t.jsx)(n.code,{children:"define-demo.yml"})," \u4e2d\u5b9a\u4e49\u53c2\u6570\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"params:\n - field: host\n   # name-param field display i18n name\n   name:\n     zh-CN: \u76ee\u6807 Host\n     en-US: Target Host\n   # type-param field type(most mapping the html input type)\n   type: text\n   # required-true or false\n   required: true\n # field-param field key\n - field: port\n   # name-param field display i18n name\n   name:\n     zh-CN: \u7aef\u53e3\n     en-US: Port\n   # type-param field type(most mapping the html input type)\n   type: number\n   # when type is number, range is required\n   range: '[0,65535]'\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u5728\u63d2\u4ef6\u903b\u8f91\u4e2d\u4f7f\u7528\u53c2\u6570"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:' @Override\n public void execute(Alert alert, PluginContext pluginContext) {\n     log.info("param host:{}",pluginContext.getString("host"));\n     log.info("param port:{}",pluginContext.getInteger("port"));\n }\n'})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},5273(e,n,l){l.d(n,{A:()=>i});const i=l.p+"assets/images/plugin-1-2895d6c2b5cdb1e30f2dfae90ee2ae27.png"},60056(e,n,l){l.d(n,{R:()=>s,x:()=>c});var i=l(30758);const t={},r=i.createContext(t);function s(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);