"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[39534],{13778(e,t,a){a.d(t,{A:()=>n});const n=a.p+"assets/images/alert-notice-4-7b968f3d348ff468ad66fd59466be545.png"},51390(e,t,a){a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>p,toc:()=>s});var n=a(44320),r=(a(37953),a(58860));const i={id:"alert_feishu_app",title:"Alert FeiShu app notification",sidebar_label:"Alert FeiShu app notification",keywords:["Alert FeiShu app notification","open source alerter","open source feishu app notification"]},o=void 0,p={unversionedId:"help/alert_feishu_app",id:"help/alert_feishu_app",title:"Alert FeiShu app notification",description:"After the threshold is triggered send alarm information and notify the recipient by FeiShu app.",source:"@site/docs/help/alert_feishu_app.md",sourceDirName:"help",slug:"/help/alert_feishu_app",permalink:"/docs/help/alert_feishu_app",draft:!1,editUrl:"https://github.com/apache/hertzbeat/edit/master/home/docs/help/alert_feishu_app.md",tags:[],version:"current",frontMatter:{id:"alert_feishu_app",title:"Alert FeiShu app notification",sidebar_label:"Alert FeiShu app notification",keywords:["Alert FeiShu app notification","open source alerter","open source feishu app notification"]},sidebar:"docs",previous:{title:"Alert FeiShu robot notification",permalink:"/docs/help/alert_feishu"},next:{title:"Console address in alarm template",permalink:"/docs/help/alert_console"}},l={},s=[{value:"Operation steps",id:"operation-steps",level:3},{value:"FeiShu app notification common issues",id:"feishu-app-notification-common-issues",level:3}],c={toc:s};function g({components:e,...t}){return(0,r.yg)("wrapper",(0,n.A)({},c,t,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},"After the threshold is triggered send alarm information and notify the recipient by FeiShu app.")),(0,r.yg)("h3",{id:"operation-steps"},"Operation steps"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u3010",(0,r.yg)("a",{parentName:"strong",href:"https://open.feishu.cn/"},"FeiShu Open Platform"),"\u3011->\u3010Create Custom App\u3011->\u3010Create\u3011->\u3010Add Features:Bot\u3011"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u3010Development Configuration\u3011->\u3010Permissions & Scopes\u3011:Different types of notification objects require different API permissions, which can be opened as needed")),(0,r.yg)("table",{parentName:"li"},(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Permission Name"),(0,r.yg)("th",{parentName:"tr",align:null},"Permission code"),(0,r.yg)("th",{parentName:"tr",align:"center"},"Designated User"),(0,r.yg)("th",{parentName:"tr",align:"center"},"Designated Group Chat"),(0,r.yg)("th",{parentName:"tr",align:"center"},"Designated Department"),(0,r.yg)("th",{parentName:"tr",align:"center"},"All User"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Obtain user ID"),(0,r.yg)("td",{parentName:"tr",align:null},"contact:user.employee_id:readonly"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713"),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Send messages as an app"),(0,r.yg)("td",{parentName:"tr",align:null},"im:message:send_as_bot"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Obtain employee information in FeiShu CoreHR (Standard version)"),(0,r.yg)("td",{parentName:"tr",align:null},"ehr:employee:readonly"),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Send batch messages to members from one or more departments"),(0,r.yg)("td",{parentName:"tr",align:null},"im:message:send_multi_depts"),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713"),(0,r.yg)("td",{parentName:"tr",align:"center"})),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Send batch messages to multiple users"),(0,r.yg)("td",{parentName:"tr",align:null},"im:message:send_multi_users"),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"}),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u2713")))),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("p",{parentName:"blockquote"},"Attention\u26a0\ufe0f:In the designated notification type of group chat,the application needs to be added as a robot to the group chat, to @someone, you need to enable the permission to 'obtain user ID'"),(0,r.yg)("p",{parentName:"blockquote"},"Batch import scopes"),(0,r.yg)("pre",{parentName:"blockquote"},(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n"scopes": {\n "tenant": [\n   "contact:user.employee_id:readonly",\n   "im:message:send_as_bot",\n   "ehr:employee:readonly",\n   "im:message:send_multi_depts",\n   "im:message:send_multi_users"\n ],\n "user": []\n}\n}\n')))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u3010App Versions\u3011->\u3010Version Management & Release\u3011->\u3010Create a version\u3011->\u3010Save\u3011->\u3010Publish\u3011"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u3010Basic Info\u3011->\u3010Credentials & Basic Info\u3011->\u3010copy and save AppID and AppSecret\u3011"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u3010Notice Receiver\u3011->\u3010New Receiver\u3011 ->\u3010Choose FeiShu App method\u3011->\u3010Set AppID and AppSecret\u3011-> \u3010Select Notice Object Type\u3011-> \u3010Set the corresponding ID\u3011"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Configure the associated alarm notification strategy\u26a0\ufe0f \u3010Add new notification strategy\u3011-> \u3010Associate the recipient just set\u3011-> \u3010Confirm\u3011")),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"Note\u26a0\ufe0f Adding a new recipient does not mean that it is effective to receive alarm information. It is also necessary to configure the associated alarm notification strategy, that is, to specify which messages are sent to which recipients."))),(0,r.yg)("p",{parentName:"li"},(0,r.yg)("img",{alt:"email",src:a(13778).A,width:"3756",height:"1288"})))),(0,r.yg)("h3",{id:"feishu-app-notification-common-issues"},"FeiShu app notification common issues"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"FeiShu app did not receive the robot alarm notification."),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("p",{parentName:"blockquote"},"Please check whether there is any triggered alarm information in the alarm center.",(0,r.yg)("br",{parentName:"p"}),"\n","Please check whether the AppID and AppSecret is configured correctly and whether the alarm strategy association is configured.",(0,r.yg)("br",{parentName:"p"}),"\n","Please check if the user was within the available range when the application was published."))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"How to @someone in a designated group chat"),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("p",{parentName:"blockquote"},"In the form for adding recipients, fill in the ",(0,r.yg)("inlineCode",{parentName:"p"},"User ID"),". If you need to @everyone, you can enter ",(0,r.yg)("inlineCode",{parentName:"p"},"all")," in the ",(0,r.yg)("inlineCode",{parentName:"p"},"User ID")," field. Multiple user IDs are also supported, separated by commas ",(0,r.yg)("inlineCode",{parentName:"p"},","),". For detailed instructions on how to get the FeiShu user ID, please refer to: ",(0,r.yg)("a",{parentName:"p",href:"https://open.feishu.cn/document/faq/trouble-shooting/how-to-obtain-user-id#529e21a9"},"Get FeiShu user id")))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"How to obtain a chat ID"),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("p",{parentName:"blockquote"},"Please refer to: ",(0,r.yg)("a",{parentName:"p",href:"https://open.feishu.cn/document/server-docs/group/chat/chat-id-description#394516c9"},"Chat ID description")))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"How to obtain party ID"),(0,r.yg)("blockquote",{parentName:"li"},(0,r.yg)("p",{parentName:"blockquote"},"Please refer to: ",(0,r.yg)("a",{parentName:"p",href:"https://open.feishu.cn/document/server-docs/contact-v3/department/field-overview#9c02ed7a"},"Department resource introduction"))))),(0,r.yg)("p",null,"Other issues can be fed back through the communication group ISSUE!"))}g.isMDXComponent=!0},58860(e,t,a){a.d(t,{xA:()=>c,yg:()=>d});var n=a(37953);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),s=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef(function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),m=s(a),d=r,u=m["".concat(l,".").concat(d)]||m[d]||g[d]||i;return a?n.createElement(u,o(o({ref:t},c),{},{components:a})):n.createElement(u,o({ref:t},c))});function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);