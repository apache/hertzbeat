"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[94579],{66412(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"start/usecase/tdengine-practice","title":"TDengine Monitoring Practice","description":"TDengine TSDB is an open-source, high-performance, cloud-native time series database (TSDB) optimized for IoT, vehicle networking, industrial Internet, finance, IT operations, and other scenarios. It also comes with built-in caching, streaming computing, data subscription, and other system functions that greatly reduce system design complexity and lower R&D and operational costs, making it an extremely simple time series data processing platform.","source":"@site/docs/start/usecase/tdengine-practice.md","sourceDirName":"start/usecase","slug":"/start/usecase/tdengine-practice","permalink":"/docs/next/start/usecase/tdengine-practice","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/docs/start/usecase/tdengine-practice.md","tags":[],"version":"current","frontMatter":{"id":"tdengine-practice","title":"TDengine Monitoring Practice","sidebar_label":"TDengine Monitoring Practice"},"sidebar":"docs","previous":{"title":"Linux Operating System Monitoring Practice","permalink":"/docs/next/start/usecase/linux-os-practice"},"next":{"title":"Log Integration (Beta)","permalink":"/docs/next/help/log_integration"}}');var s=t(86070),r=t(60056);const a={id:"tdengine-practice",title:"TDengine Monitoring Practice",sidebar_label:"TDengine Monitoring Practice"},o=void 0,c={},l=[{value:"What is HertzBeat?",id:"what-is-hertzbeat",level:2},{value:"Install HertzBeat",id:"install-hertzbeat",level:2},{value:"Enable TDengine monitoring",id:"enable-tdengine-monitoring",level:2},{value:"Monitor TDengine(PromQL)",id:"monitor-tdenginepromql",level:2},{value:"Monitor TDengine(Prometheus)",id:"monitor-tdengineprometheus",level:2},{value:"Grafana visualization integration (optional)",id:"grafana-visualization-integration-optional",level:3},{value:"Alarm and notification linkage",id:"alarm-and-notification-linkage",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"TDengine TSDB is an open-source, high-performance, cloud-native time series database (TSDB) optimized for IoT, vehicle networking, industrial Internet, finance, IT operations, and other scenarios. It also comes with built-in caching, streaming computing, data subscription, and other system functions that greatly reduce system design complexity and lower R&D and operational costs, making it an extremely simple time series data processing platform."})}),"\n",(0,s.jsx)(n.p,{children:"This article introduces how to use the Hertzbeat monitoring system to collect and monitor TDengine general performance indicators."}),"\n",(0,s.jsx)(n.h2,{id:"what-is-hertzbeat",children:"What is HertzBeat?"}),"\n",(0,s.jsx)(n.p,{children:"Apache HertzBeat\u2122 is a real-time monitoring tool with powerful customization capabilities that does not require an agent. It monitors websites, PING connectivity, port availability, databases, operating systems, middleware, APIs, threshold alerts, and alert notifications (email, WeChat, DingTalk, Feishu)."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["github: ",(0,s.jsx)(n.a,{href:"https://github.com/apache/hertzbeat",children:"https://github.com/apache/hertzbeat"})]})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"install-hertzbeat",children:"Install HertzBeat"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"docker"})," environment can be installed with just one command."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"docker run -d -p 1157:1157 -p 1158:1158 --name hertzbeat apache/hertzbeat"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Once installed, you can start by accessing ",(0,s.jsx)(n.code,{children:"localhost:1157"})," in your browser. The default username and password are ",(0,s.jsx)(n.code,{children:"admin/hertzbeat"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["Recommended deployment method for production environments, reference: ",(0,s.jsx)(n.a,{href:"https://hertzbeat.apache.org/docs/start/docker-compose-deploy",children:"https://hertzbeat.apache.org/docs/start/docker-compose-deploy"})]})}),"\n",(0,s.jsx)(n.h2,{id:"enable-tdengine-monitoring",children:"Enable TDengine monitoring"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["TDengine TSDB integrates multiple monitoring metric collection mechanisms and aggregates them through taosKeeper. taosKeeper is a monitoring metric export tool for TDengine TSDB version 3.0. With just a few simple configurations, you can obtain the runtime status of TDengine TSDB. For reference: ",(0,s.jsx)(n.a,{href:"https://docs.taosdata.com/reference/components/taoskeeper/",children:"https://docs.taosdata.com/reference/components/taoskeeper/"})]})}),"\n",(0,s.jsx)(n.h2,{id:"monitor-tdenginepromql",children:"Monitor TDengine(PromQL)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Added TDengine-PromQL monitoring"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"System Page -> Monitoring Center -> Add Monitoring -> Custom Monitoring -> TDengine-PromQL Task"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(59781).A+"",width:"3024",height:"1444"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Fill in key parameters"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Target Host"}),": Prometheus application server address (without protocol header, e.g., https://, http://)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Port"}),": Prometheus API port, default value: 9090"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Endpoint path"}),": The URL for Prometheus to query PromQL. Default value: ",(0,s.jsx)(n.code,{children:"/api/v1/query"})]}),"\n",(0,s.jsxs)(n.p,{children:["You can use tags to categorize tasks, such as adding business-related tags like ",(0,s.jsx)(n.code,{children:"env=test"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(31950).A+"",width:"3022",height:"1710"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"View inspection indicator data"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"You can view task statuses in the monitoring list and view metric data charts and other information in the monitoring details."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(31447).A+"",width:"1919",height:"967"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(9304).A+"",width:"3020",height:"1682"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"monitor-tdengineprometheus",children:"Monitor TDengine(Prometheus)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"New AUTO monitoring"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"System Page -> Monitoring Center -> Add Monitoring -> AUTO -> Prometheus Task"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(7741).A+"",width:"3018",height:"668"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Fill in key parameters"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Target Host"})," taosKeeper service address (without protocol header, e.g., https://, http://)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Port"}),": taosKeeper service port (e.g., 6043)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Endpoint path"}),": ",(0,s.jsx)(n.code,{children:"/metrics"})]}),"\n",(0,s.jsxs)(n.p,{children:["You can use tags to categorize tasks, such as adding business-related tags like ",(0,s.jsx)(n.code,{children:"env=test"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(26534).A+"",width:"3012",height:"1402"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"View inspection indicator data"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"You can view task statuses in the monitoring list and view metric data charts and other information in the monitoring details."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(65551).A+"",width:"3020",height:"1514"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(53328).A+"",width:"3018",height:"1704"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"grafana-visualization-integration-optional",children:"Grafana visualization integration (optional)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Grafana chart configuration"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"You need to enable Grafana's embeddable feature and allow anonymous access."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["For complete configuration, please refer to the documentation: ",(0,s.jsx)(n.a,{href:"https://hertzbeat.apache.org/zh-cn/docs/help/grafana_dashboard",children:"Grafana Historical Charts"})]})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Embedding Grafana dashboards in HertzBeat monitoring"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"After enabling Grafana, restart the HertzBeat service, enable it in the newly added AUTO monitoring, and upload the Grafana template."}),"\n",(0,s.jsxs)(n.p,{children:["For example: Select the Grafana data source ",(0,s.jsx)(n.code,{children:"hertzbeat-victoria-metrics"}),', then click "Share" \u2192 "Export" \u2192 "Save to file" on the dashboard to download the template and upload it to HertzBeat monitoring. For reference, see: ',(0,s.jsx)(n.a,{href:"https://grafana.com/grafana/dashboards/15164-taoskeeper-prometheus-dashboard/",children:"taoskeeper-prometheus-dashboard"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(59577).A+"",width:"3020",height:"1684"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"View Grafana charts"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Go to the new AUTO monitoring page, click the Grafana icon button to view the Grafana chart."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(19842).A+"",width:"3016",height:"1712"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"alarm-and-notification-linkage",children:"Alarm and notification linkage"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"HertzBeat Alert Configuration"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"System Page -> Alerts -> Threshold Rules -> Add -> Add Threshold"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(30433).A+"",width:"3018",height:"826"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["HertzBeat provides two types of threshold rule settings: ",(0,s.jsx)(n.strong,{children:"real-time calculation"})," and ",(0,s.jsx)(n.strong,{children:"scheduled cycle"}),". Here, we will use the ",(0,s.jsx)(n.strong,{children:"scheduled cycle"})," threshold rule as an example."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Threshold Name"}),": Threshold rule name"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Threshold rules"}),": Fill in the rules for monitoring indicators (supports ",(0,s.jsx)(n.code,{children:"PromQL"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Execution cycle"}),": The time interval for calculating the periodic execution threshold."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Alarm Level"}),": The alarm level triggered by the threshold, from low to high: Warning, Critical, Emergency."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Trigger count"}),": Set the threshold number of times the trigger must occur before an alert is sent."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Alarm content"}),": Fill in the content of the monitoring alarm (supports filling in variables)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Set threshold rules"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["For example, to monitor the CPU percentage used by the Dnode node system, add a threshold rule: ",(0,s.jsx)(n.code,{children:"taos_dnodes_info_cpu_system_value > 20"})]}),"\n",(0,s.jsx)(n.p,{children:"There are many combinations of threshold rules that can be set, and users can set more detailed alert rules according to their needs."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(89354).A+"",width:"3016",height:"1716"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Finally, you can see the triggered alerts in the Alert Center."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(4915).A+"",width:"3004",height:"934"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Alert notification"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"System Page -> Message Notifications -> Notification Media -> Add New Recipient"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(78996).A+"",width:"3020",height:"1148"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"System Page -> Message Notifications -> Notification Policies -> Add Notification Policy -> Select recipients and enable notifications"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"HertzBeat",src:t(125).A+"",width:"3012",height:"1144"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"OK! When the threshold rule is triggered, we will receive the corresponding alert message. If no notification is configured, you can also view the alert information in the alert center."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"That concludes our practical guide to monitoring TDengine applications. Of course, this feature is just the tip of the iceberg for HertzBeat. If you like this open-source project, please give it a star on GitHub or Gitee. Your stars are what motivate us to keep improving! Please light up the little stars \u2728"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Making monitoring simpler, we look forward to building an ecosystem with you!"})," \ud83d\udc9d"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["github: ",(0,s.jsx)(n.a,{href:"https://github.com/apache/hertzbeat",children:"https://github.com/apache/hertzbeat"})]})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["gitee: ",(0,s.jsx)(n.a,{href:"https://gitee.com/hertzbeat/hertzbeat",children:"https://gitee.com/hertzbeat/hertzbeat"})]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},59781(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_1-3cbd39dd4a3a797bf76a4187db23207f.png"},7741(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_1_1-90f839025064cda1159f2f49464e010c.png"},26534(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_1_2-c905c09cbe5536c5dee8e43f94b90ee9.png"},65551(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_1_3-fbd376c7d83da9b2aef0d6d6b057f116.png"},53328(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_1_4-100e9c13888c8ba83f65cad936d12373.png"},59577(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_1_5-3fc5adcbaee483b30fd9c0f71fd920ed.png"},19842(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_1_6-753f21b5b478a3492655a6b1e1eaec81.png"},31950(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_2-e180230c5cf683da5d95f08cc3e0d300.png"},31447(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_3-938128740581b92a17af25bd65518a72.png"},9304(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_4-9b0193311ca12d5dac4559d8ac91e14f.png"},30433(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_5-3f3c8f11fd4b0bcbce749cdb0aac8200.png"},89354(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_6-e64449a3fd6e65d1426c84fdf4d53556.png"},4915(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_7-e9834ad77f851af5dd78b7e542333b72.png"},78996(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_8-f62630b28d7f8296fb7879b34dc7c3e4.png"},125(e,n,t){t.d(n,{A:()=>i});const i=t.p+"assets/images/tdengine_9-34fa9972c9a2f7a52365f36502f565ab.png"},60056(e,n,t){t.d(n,{R:()=>a,x:()=>o});var i=t(30758);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);