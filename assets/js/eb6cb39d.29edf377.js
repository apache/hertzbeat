"use strict";(self.webpackChunkhertzbeat=self.webpackChunkhertzbeat||[]).push([[88801],{15680:(e,a,n)=>{n.d(a,{xA:()=>d,yg:()=>m});var t=n(96540);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function i(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?i(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=t.createContext({}),p=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},d=function(e){var a=p(e.components);return t.createElement(s.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},g=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),g=p(n),m=r,f=g["".concat(s,".").concat(m)]||g[m]||c[m]||i;return n?t.createElement(f,o(o({ref:a},d),{},{components:n})):t.createElement(f,o({ref:a},d))}));function m(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=g;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}g.displayName="MDXCreateElement"},40298:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var t=n(58168),r=(n(96540),n(15680));const i={id:"grafana_dashboard",title:"Grafana Dashboard",sidebar_label:"Grafana Historical Charts",keywords:["Grafana","Historical Dashboard"]},o=void 0,l={unversionedId:"help/grafana_dashboard",id:"help/grafana_dashboard",title:"Grafana Dashboard",description:"Grafana is an open source visualization and analytics platform that helps you easily create, share and monitor dashboards. In this article, we will cover how to use Grafana to display historical data in HertzBeat.",source:"@site/docs/help/grafana_dashboard.md",sourceDirName:"help",slug:"/help/grafana_dashboard",permalink:"/docs/help/grafana_dashboard",draft:!1,editUrl:"https://github.com/apache/hertzbeat/edit/master/home/docs/help/grafana_dashboard.md",tags:[],version:"current",frontMatter:{id:"grafana_dashboard",title:"Grafana Dashboard",sidebar_label:"Grafana Historical Charts",keywords:["Grafana","Historical Dashboard"]},sidebar:"docs",previous:{title:"Time Expression",permalink:"/docs/help/time_expression"},next:{title:"MCP SSE Server",permalink:"/docs/help/mcp_sse_server"}},s={},p=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Enable Grafana embedded features and configure anonymous authentication with role-based permissions",id:"enable-grafana-embedded-features-and-configure-anonymous-authentication-with-role-based-permissions",level:3},{value:"Configuring Grafana in HertzBeat",id:"configuring-grafana-in-hertzbeat",level:3},{value:"Upload Grafana monitor template json file in HertzBeat monitor",id:"upload-grafana-monitor-template-json-file-in-hertzbeat-monitor",level:3},{value:"View Grafana historical charts",id:"view-grafana-historical-charts",level:3}],d={toc:p};function c(e){let{components:a,...i}=e;return(0,r.yg)("wrapper",(0,t.A)({},d,i,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," is an open source visualization and analytics platform that helps you easily create, share and monitor dashboards. In this article, we will cover how to use ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," to display historical data in ",(0,r.yg)("inlineCode",{parentName:"p"},"HertzBeat"),".")),(0,r.yg)("h3",{id:"prerequisites"},"Prerequisites"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"We recommend using the latest version of Grafana. Earlier versions may not support the exposed API."),(0,r.yg)("li",{parentName:"ul"},"The ",(0,r.yg)("inlineCode",{parentName:"li"},"Grafana")," service is started and the account password is configured."),(0,r.yg)("li",{parentName:"ul"},"The ",(0,r.yg)("inlineCode",{parentName:"li"},"HertzBeat")," service is started and the ",(0,r.yg)("inlineCode",{parentName:"li"},"VictoriaMetrics")," time-series database is configured (note: the ",(0,r.yg)("inlineCode",{parentName:"li"},"VictoriaMetrics")," data source is required).")),(0,r.yg)("admonition",{title:"Caution.",type:"caution"},(0,r.yg)("p",{parentName:"admonition"},(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," can only show historical data for ",(0,r.yg)("inlineCode",{parentName:"p"},"Prometheus")," type of monitoring, currently it does not support monitoring data defined by ",(0,r.yg)("inlineCode",{parentName:"p"},"yml")," in ",(0,r.yg)("inlineCode",{parentName:"p"},"HertzBeat"),".")),(0,r.yg)("h3",{id:"enable-grafana-embedded-features-and-configure-anonymous-authentication-with-role-based-permissions"},"Enable Grafana embedded features and configure anonymous authentication with role-based permissions"),(0,r.yg)("p",null,"ref: ",(0,r.yg)("a",{parentName:"p",href:"https://grafana.com/blog/2023/10/10/how-to-embed-grafana-dashboards-into-web-applications/"},"https://grafana.com/blog/2023/10/10/how-to-embed-grafana-dashboards-into-web-applications/"),".\nIn the ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," configuration file ",(0,r.yg)("inlineCode",{parentName:"p"},"grafana.ini"),", set the configuration parameters.\nOr run ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," via ",(0,r.yg)("inlineCode",{parentName:"p"},"Docker"),"."),(0,r.yg)("p",null,"Modify the following configuration parameters in the ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," configuration file ",(0,r.yg)("inlineCode",{parentName:"p"},"grafana.ini"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ini"},"[auth.proxy]\nenabled = true\n\n[auth.anonymous]\nenabled = true\norg_role = Admin\n\n[users]\nviewers_can_edit = true\n\n[security]\nallow_embedding = true\n")),(0,r.yg)("p",null,"Or run ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," via ",(0,r.yg)("inlineCode",{parentName:"p"},"Docker")," using the following command:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'docker run -d -p 3000:3000 --name=grafana \\\n  -v "$PWD/data:/var/lib/grafana" \\\n  -e "GF_AUTH_PROXY_ENABLED=true" \\\n  -e "GF_AUTH_ANONYMOUS_ENABLED=true" \\\n  -e "GF_AUTH_ANONYMOUS_ORG_ROLE=Admin" \\\n  -e "GF_USERS_VIEWERS_CAN_EDIT=true" \\\n  -e "GF_SECURITY_ALLOW_EMBEDDING=true" \\\n  grafana/grafana:latest\n')),(0,r.yg)("h3",{id:"configuring-grafana-in-hertzbeat"},"Configuring Grafana in HertzBeat"),(0,r.yg)("p",null,"In the configuration file ",(0,r.yg)("inlineCode",{parentName:"p"},"application.yml")," in ",(0,r.yg)("inlineCode",{parentName:"p"},"HertzBeat"),", configure the ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," data source."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-yaml"},"grafana:\n  enabled: true\n  url: http://127.0.0.1:3000\n  username: admin\n  password: admin\n")),(0,r.yg)("h3",{id:"upload-grafana-monitor-template-json-file-in-hertzbeat-monitor"},"Upload Grafana monitor template json file in HertzBeat monitor"),(0,r.yg)("p",null,"In ",(0,r.yg)("inlineCode",{parentName:"p"},"HertzBeat"),", when creating or editing a ",(0,r.yg)("inlineCode",{parentName:"p"},"Prometheus")," type monitor, click Enable Grafana Templates and select the Grafana template json file to upload.\nThe monitor template json file can be downloaded at ",(0,r.yg)("a",{parentName:"p",href:"https://grafana.com/grafana/dashboards/"},"https://grafana.com/grafana/dashboards/"),".\nFor example, create a new monitor in ",(0,r.yg)("inlineCode",{parentName:"p"},"HertzBeat")," for ",(0,r.yg)("inlineCode",{parentName:"p"},"VictoriaMetrics")," single node, then open ",(0,r.yg)("a",{parentName:"p",href:"https://grafana.com/grafana/dashboards/10229-victoriametrics-single-node/"},"https://grafana.com/grafana/dashboards/10229-victoriametrics-single-node/"),", click ",(0,r.yg)("inlineCode",{parentName:"p"},"Download JSON")," button on the right side. ",(0,r.yg)("inlineCode",{parentName:"p"},"Download JSON")," button on the right to download the template json file. Upload the template json file in the ",(0,r.yg)("inlineCode",{parentName:"p"},"HertzBeat")," monitor, save it.\n",(0,r.yg)("img",{alt:"grafana-1.png",src:n(36310).A,width:"1905",height:"926"})),(0,r.yg)("h3",{id:"view-grafana-historical-charts"},"View Grafana historical charts"),(0,r.yg)("p",null,"On the ",(0,r.yg)("inlineCode",{parentName:"p"},"HertzBeat")," monitoring page, click the ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," button, select ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," Historical Charts, select a monitoring template, and click the ",(0,r.yg)("inlineCode",{parentName:"p"},"Query")," button to view the ",(0,r.yg)("inlineCode",{parentName:"p"},"Grafana")," historical charts.\n",(0,r.yg)("img",{alt:"grafana-2.png",src:n(68077).A,width:"1903",height:"927"})))}c.isMDXComponent=!0},36310:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/grafana-1-ca9ca2e4cf00038b9eac8b029da18f08.png"},68077:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/grafana-2-29979a6a7acbb70c333142c69413520a.png"}}]);