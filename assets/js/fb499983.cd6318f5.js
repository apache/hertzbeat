"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[27435],{45906:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>c});var r=n(30758);const i={},s=r.createContext(i);function d(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(s.Provider,{value:t},e.children)}},84397:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"help/kubernetes","title":"kubernetes","description":"Collect and monitor the general performance metrics of Kubernetes.","source":"@site/docs/help/kubernetes.md","sourceDirName":"help","slug":"/help/kubernetes","permalink":"/docs/help/kubernetes","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/docs/help/kubernetes.md","tags":[],"version":"current","frontMatter":{"id":"kubernetes","Title":"Monitoring Kubernetes","sidebar_label":"Kubernetes Monitor","keywords":["open source monitoring tool","open source kubernetes monitoring tool","monitoring kubernetes metrics"]},"sidebar":"docs","previous":{"title":"Docker Monitor","permalink":"/docs/help/docker"},"next":{"title":"OpenAI Account Status","permalink":"/docs/help/openai"}}');var i=n(86070),s=n(45906);const d={id:"kubernetes",Title:"Monitoring Kubernetes",sidebar_label:"Kubernetes Monitor",keywords:["open source monitoring tool","open source kubernetes monitoring tool","monitoring kubernetes metrics"]},c=void 0,l={},o=[{value:"Pre-monitoring operations",id:"pre-monitoring-operations",level:2},{value:"method one",id:"method-one",level:3},{value:"method two",id:"method-two",level:3},{value:"Configure parameters",id:"configure-parameters",level:3},{value:"Collect metrics",id:"collect-metrics",level:3},{value:"metric collection: nodes",id:"metric-collection-nodes",level:4},{value:"metric Collection: namespaces",id:"metric-collection-namespaces",level:4},{value:"metric collection: pods",id:"metric-collection-pods",level:4},{value:"metric Collection: services",id:"metric-collection-services",level:4}];function h(e){const t={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"Collect and monitor the general performance metrics of Kubernetes."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"pre-monitoring-operations",children:"Pre-monitoring operations"}),"\n",(0,i.jsx)(t.p,{children:"If you want to monitor the information in 'Kubernetes', you need to obtain an authorization token that can access the API Server, so that the collection request can obtain the corresponding information."}),"\n",(0,i.jsx)(t.p,{children:"Refer to the steps to obtain token"}),"\n",(0,i.jsx)(t.h3,{id:"method-one",children:"method one"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Create a service account and bind the default cluster-admin administrator cluster role"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"kubectl create serviceaccount dashboard-admin -n kube-system"})}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"User Authorization"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"kubectl create clusterrolebinding dashboard-admin --clusterrole=cluster-admin --serviceaccount=kube-system:dashboard-admin\nkubectl -n kube-system get secret | grep dashboard-admin | awk '{print $1}'\nkubectl describe secret {secret} -n kube-system\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"method-two",children:"method two"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"kubectl create serviceaccount cluster-admin\nkubectl create clusterrolebinding cluster-admin-manual --clusterrole=cluster-admin --serviceaccount=default:cluster-admin\nkubectl create token --duration=1000h cluster-admin\n"})}),"\n",(0,i.jsx)(t.h3,{id:"configure-parameters",children:"Configure parameters"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Parameter name"}),(0,i.jsx)(t.th,{children:"Parameter Help describes the"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Monitor Host"}),(0,i.jsx)(t.td,{children:"THE MONITORED PEER IPV4, IPV6 OR DOMAIN NAME. Note \u26a0\ufe0f that there are no protocol headers (eg: https://, http://)."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Monitoring Name"}),(0,i.jsx)(t.td,{children:"A name that identifies this monitoring that needs to be unique."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"APiServer port"}),(0,i.jsx)(t.td,{children:"K8s APiServer port, default 6443"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"token"}),(0,i.jsx)(t.td,{children:"Authorize the Access Token"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"URL"}),(0,i.jsx)(t.td,{children:"The database connection URL is optional, if configured, the database name, user name and password parameters in the URL will override the parameter configured above"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Collection interval"}),(0,i.jsx)(t.td,{children:"Monitor the periodic data acquisition interval, in seconds, and the minimum interval that can be set is 30 seconds"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Whether to probe"}),(0,i.jsx)(t.td,{children:"Whether to check the availability of the monitoring before adding a monitoring is successful, and the new modification operation"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Description Comment"}),(0,i.jsx)(t.td,{children:"For more information identifying and describing the remarks for this monitoring, users can remark the information here"})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"collect-metrics",children:"Collect metrics"}),"\n",(0,i.jsx)(t.h4,{id:"metric-collection-nodes",children:"metric collection: nodes"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric Name"}),(0,i.jsx)(t.th,{children:"metric unit"}),(0,i.jsx)(t.th,{children:"Metrics help describe"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"node_name"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Node name"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"is_ready"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Node Status"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"capacity_cpu"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"CPU capacity"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"allocatable_cpu"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"CPU allotted"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"capacity_memory"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Memory capacity"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"allocatable_memory"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Memory allocated"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"creation_time"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Node creation time"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"uid"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"UUID unique identifier"})]})]})]}),"\n",(0,i.jsx)(t.h4,{id:"metric-collection-namespaces",children:"metric Collection: namespaces"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric Name"}),(0,i.jsx)(t.th,{children:"metric unit"}),(0,i.jsx)(t.th,{children:"Metrics help describe"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"namespace"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"namespace name"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"status"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Status"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"creation_time"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Created"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"uid"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"UUID unique identifier"})]})]})]}),"\n",(0,i.jsx)(t.h4,{id:"metric-collection-pods",children:"metric collection: pods"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric Name"}),(0,i.jsx)(t.th,{children:"metric unit"}),(0,i.jsx)(t.th,{children:"Metrics help describe"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"pod"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Pod name"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"namespace"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"The namespace to which the pod belongs"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"status"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Pod status"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"restart"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Number of restarts"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"host_ip"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"The IP address of the host is"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"pod_ip"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"pod ip"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"creation_time"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Pod creation time"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"start_time"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Pod startup time"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"uid"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"UUID unique identifier"})]})]})]}),"\n",(0,i.jsx)(t.h4,{id:"metric-collection-services",children:"metric Collection: services"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Metric Name"}),(0,i.jsx)(t.th,{children:"metric unit"}),(0,i.jsx)(t.th,{children:"Metrics help describe"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"service"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Service Name"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"namespace"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"The namespace to which the service belongs"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"type"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Service Type ClusterIP NodePort LoadBalancer ExternalName"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"cluster_ip"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"cluster ip"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"selector"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"tag selector matches"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"creation_time"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"Created"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"uid"}),(0,i.jsx)(t.td,{children:"None"}),(0,i.jsx)(t.td,{children:"UUID unique identifier"})]})]})]})]})}function a(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);