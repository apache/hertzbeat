"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[17211],{45906:(e,t,l)=>{l.d(t,{R:()=>r,x:()=>d});var s=l(30758);const n={},i=s.createContext(n);function r(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),s.createElement(i.Provider,{value:t},e.children)}},79399:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>x,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"help/db2","title":"Monitoring\uff1aDB2 database monitoring","description":"Collect and monitor general performance metrics (tablespace, session status, process count, locks, slow queries, etc.)","source":"@site/versioned_docs/version-1.8.0/help/db2.md","sourceDirName":"help","slug":"/help/db2","permalink":"/docs/1.8.0/help/db2","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/versioned_docs/version-1.8.0/help/db2.md","tags":[],"version":"1.8.0","frontMatter":{"id":"db2","title":"Monitoring\uff1aDB2 database monitoring","sidebar_label":"DB2 Database","keywords":["open source monitoring tool","open source database monitoring tool","monitoring DB2 database metrics"]},"sidebar":"docs","previous":{"title":"OceanBase database","permalink":"/docs/1.8.0/help/oceanbase"},"next":{"title":"REDIS","permalink":"/docs/1.8.0/help/redis"}}');var n=l(86070),i=l(45906);const r={id:"db2",title:"Monitoring\uff1aDB2 database monitoring",sidebar_label:"DB2 Database",keywords:["open source monitoring tool","open source database monitoring tool","monitoring DB2 database metrics"]},d=void 0,c={},o=[{value:"Note: DB2 JDBC Driver JAR Must be Added",id:"note-db2-jdbc-driver-jar-must-be-added",level:3},{value:"Configuration Parameters",id:"configuration-parameters",level:3},{value:"Collected Metrics",id:"collected-metrics",level:3},{value:"Metric Set: Basic Info",id:"metric-set-basic-info",level:4},{value:"Metric Set: Tablespace Usage",id:"metric-set-tablespace-usage",level:4},{value:"Metric Set: Session Status",id:"metric-set-session-status",level:4},{value:"Metric Set: Application Process Count",id:"metric-set-application-process-count",level:4},{value:"Metric Set: Locks",id:"metric-set-locks",level:4},{value:"Metric Set: Slow Query",id:"metric-set-slow-query",level:4}];function a(e){const t={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Collect and monitor general performance metrics (tablespace, session status, process count, locks, slow queries, etc.)\nfor DB2 databases."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"note-db2-jdbc-driver-jar-must-be-added",children:"Note: DB2 JDBC Driver JAR Must be Added"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Download the DB2 JDBC driver JAR package, for\nexample, ",(0,n.jsx)(t.a,{href:"https://repo1.maven.org/maven2/com/ibm/db2/jcc/11.5.9.0/jcc-11.5.9.0.jar",children:"jcc.jar"}),"."]}),"\n",(0,n.jsxs)(t.li,{children:["Copy the JAR package to the ",(0,n.jsx)(t.code,{children:"hertzbeat/ext-lib"})," directory."]}),"\n",(0,n.jsx)(t.li,{children:"Restart the HertzBeat service."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"configuration-parameters",children:"Configuration Parameters"}),"\n",(0,n.jsx)(t.p,{children:"The following are the required configuration parameters for DB2 monitoring:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Parameter Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Target Host"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"The IPv4, IPv6, or domain name of the monitored DB2 database server."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Port"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["The port provided by the DB2 database, default is ",(0,n.jsx)(t.code,{children:"50000"}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Database Name"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"The name of the DB2 database to connect to."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Username"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"The username for the database connection."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Password"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"The password for the database connection."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Query Timeout"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["Sets the timeout for when an SQL query does not return data, in milliseconds (ms), default is ",(0,n.jsx)(t.code,{children:"6000"}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"Reuse Connection"})}),(0,n.jsxs)(t.td,{style:{textAlign:"left"},children:["Whether to reuse the database connection, boolean value, default is ",(0,n.jsx)(t.code,{children:"true"}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.strong,{children:"URL"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"The database connection URL, optional. If configured, it will override the database name, username, and password parameters set above."})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"collected-metrics",children:"Collected Metrics"}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-basic-info",children:"Metric Set: Basic Info"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Unit"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"database_version"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Database Version."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"instance_name"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Database Instance Name."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"status"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Instance Status."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"num_db"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Number of Databases."})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-tablespace-usage",children:"Metric Set: Tablespace Usage"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Unit"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"tablespace_name"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Tablespace Name."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"status"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Type."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"total"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"MB"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Total Size."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"used"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"MB"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Used Size."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"free"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"MB"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Free Size."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"used_percentage"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Percentage (%)"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Used Percentage."})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-session-status",children:"Metric Set: Session Status"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Unit"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"status_type"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Session Status Type."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"count"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Count of sessions in that status."})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-application-process-count",children:"Metric Set: Application Process Count"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Unit"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Description"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"process_count"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Total number of application processes/sessions."})]})})]}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-locks",children:"Metric Set: Locks"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Unit"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Description"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"waiting_locks"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Number of currently waiting locks."})]})})]}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-slow-query",children:"Metric Set: Slow Query"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Name"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Unit"}),(0,n.jsx)(t.th,{style:{textAlign:"left"},children:"Metric Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"avg_exe_time"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"ms"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"Average Execution Time."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{style:{textAlign:"left"},children:(0,n.jsx)(t.code,{children:"sql_text"})}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"None"}),(0,n.jsx)(t.td,{style:{textAlign:"left"},children:"SQL Text of the slow query."})]})]})]})]})}function x(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}}}]);