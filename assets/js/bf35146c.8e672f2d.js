"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[64533],{17509:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/alert-notification-template-1-en-dd01f8d7f2f889845ab99ba41f34dbb2.png"},45906:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>s});var i=n(30758);const a={},l=i.createContext(a);function r(e){const t=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(l.Provider,{value:t},e.children)}},71670:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"help/alert_notification_template","title":"Notification Template","description":"HertzBeat supports custom notification templates. Templates use placeholder variables for rendering, and the system automatically replaces variables with actual alert data during push notifications.","source":"@site/versioned_docs/version-1.7.x/help/alert_notification_template.md","sourceDirName":"help","slug":"/help/alert_notification_template","permalink":"/docs/1.7.x/help/alert_notification_template","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/versioned_docs/version-1.7.x/help/alert_notification_template.md","tags":[],"version":"1.7.x","frontMatter":{"id":"alert_notification_template","title":"Notification Template","sidebar_label":"Notification Template","keywords":["Template","Alert Template","Alarm Template","Notification Template","Message Notification","Alert Webhook Callback Notification"]},"sidebar":"docs","previous":{"title":"Alert Huawei Cloud SMN Notifications","permalink":"/docs/1.7.x/help/alert_smn"},"next":{"title":"Eureka Service Discovery","permalink":"/docs/1.7.x/help/eureka_sd"}}');var a=n(86070),l=n(45906);const r={id:"alert_notification_template",title:"Notification Template",sidebar_label:"Notification Template",keywords:["Template","Alert Template","Alarm Template","Notification Template","Message Notification","Alert Webhook Callback Notification"]},s=void 0,o={},c=[{value:"Template Configuration",id:"template-configuration",level:2},{value:"Template Rendering",id:"template-rendering",level:2},{value:"Available Variables and Data Structures",id:"available-variables-and-data-structures",level:2},{value:"GroupAlert Structure Fields",id:"groupalert-structure-fields",level:3},{value:"SingleAlert Structure Fields",id:"singlealert-structure-fields",level:3},{value:"Template Variables and Syntax Explanation",id:"template-variables-and-syntax-explanation",level:2},{value:"Template Example",id:"template-example",level:2}];function d(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"HertzBeat supports custom notification templates. Templates use placeholder variables for rendering, and the system automatically replaces variables with actual alert data during push notifications."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"template-configuration",children:"Template Configuration"}),"\n",(0,a.jsx)(t.p,{children:"\u3010Notification\u3011->\u3010Notice Template\u3011->\u3010Template Configuration\u3011"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Template Configuration",src:n(17509).A+"",width:"2878",height:"1362"})}),"\n",(0,a.jsx)(t.h2,{id:"template-rendering",children:"Template Rendering"}),"\n",(0,a.jsx)(t.p,{children:"HertzBeat notification templates are based on FreeMarker syntax, supporting variable placeholders, conditional judgments, loops, formatting, and other advanced features. During template rendering, the system injects alert data objects (e.g., GroupAlert, SingleAlert) into the template, and variables are automatically replaced with actual values."}),"\n",(0,a.jsx)(t.h2,{id:"available-variables-and-data-structures",children:"Available Variables and Data Structures"}),"\n",(0,a.jsx)(t.h3,{id:"groupalert-structure-fields",children:"GroupAlert Structure Fields"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"https://github.com/apache/hertzbeat/blob/master/hertzbeat-common/src/main/java/org/apache/hertzbeat/common/entity/alerter/GroupAlert.java",children:"GroupAlert Definition"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"id"}),"\uff1aPrimary key of the alert group"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"groupKey"}),"\uff1a Unique identifier for the group"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"status"}),"\uff1aGroup status (e.g., firing, resolved)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"groupLabels"}),"\uff1aGroup labels (Map)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"commonLabels"}),"\uff1aCommon labels (Map)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"commonAnnotations"}),"\uff1aCommon annotations (Map)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"alertFingerprints"}),"\uff1aList of alert fingerprints"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"creator"}),"\u3001",(0,a.jsx)(t.code,{children:"modifier"}),"\u3001",(0,a.jsx)(t.code,{children:"gmtCreate"}),"\u3001",(0,a.jsx)(t.code,{children:"gmtUpdate"}),"\uff1aMetadata"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"alerts"}),"\uff1aList of alert details \uff08",(0,a.jsx)(t.code,{children:"List<SingleAlert>"}),"\uff09"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"singlealert-structure-fields",children:"SingleAlert Structure Fields"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"https://github.com/apache/hertzbeat/blob/master/hertzbeat-common/src/main/java/org/apache/hertzbeat/common/entity/alerter/SingleAlert.java",children:"SingleAlert Definition"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"id"}),"\uff1aPrimary key of the detail"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"fingerprint"}),"\uff1aUnique fingerprint"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"labels"}),"\uff1aLabels (Map)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"annotations"}),"\uff1aAnnotations (Map)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"content"}),"\uff1aAlert content"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"status"}),"\uff1aStatus (firing|resolved)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"triggerTimes"}),"\uff1aNumber of triggers"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"startAt"}),"\u3001",(0,a.jsx)(t.code,{children:"activeAt"}),"\u3001",(0,a.jsx)(t.code,{children:"endAt"}),"\uff1aTimestamps"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"creator"}),"\u3001",(0,a.jsx)(t.code,{children:"modifier"}),"\u3001",(0,a.jsx)(t.code,{children:"gmtCreate"}),"\u3001",(0,a.jsx)(t.code,{children:"gmtUpdate"}),"\uff1aMetadata"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"template-variables-and-syntax-explanation",children:"Template Variables and Syntax Explanation"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Global Variables"}),"\uff1a"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"status"}),"\uff1aAlert status (e.g., alert, recovery, etc.)"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"groupKey"}),"\uff1aUnique identifier for the group"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"${commonLabels.xxx}"}),"\u3001",(0,a.jsx)(t.code,{children:"${commonAnnotations.xxx}"}),"\uff1aCommon labels and annotations, accessed via ",(0,a.jsx)(t.code,{children:"xxx"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Alert Details List"}),"\uff1a"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"alerts"}),"\uff1aCollection of alert details, usually traversed with ",(0,a.jsx)(t.code,{children:"<#list alerts as alert>"})]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"${alert.labels.xxx}"}),"\u3001",(0,a.jsx)(t.code,{children:"${alert.annotations.xxx}"}),"\uff1aLabels and annotations for a single alert"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"${alert.content}"}),"\uff1aAlert content"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"${alert.triggerTimes}"}),"\uff1aNumber of triggers"]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.code,{children:"${alert.startAt}"}),"\uff1aFirst trigger time"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Template Syntax Support"}),"\uff1a"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["Supports FreeMarker syntax, including conditional statements ",(0,a.jsx)(t.code,{children:"<#if>"}),", loops ",(0,a.jsx)(t.code,{children:"<#list>"}),", JSON stringification ",(0,a.jsx)(t.code,{children:"?json_string"}),", time formatting ",(0,a.jsx)(t.code,{children:"?number_to_datetime"}),", string formatting ",(0,a.jsx)(t.code,{children:"?string('yyyy-MM-dd HH:mm:ss')"}),", etc."]}),"\n",(0,a.jsx)(t.li,{children:"Allows flexible combination of variables and template syntax to achieve complex message customization."}),"\n",(0,a.jsxs)(t.li,{children:["For more syntax, refer to the ",(0,a.jsx)(t.a,{href:"https://freemarker.apache.org/",children:"FreeMarker Documentation"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"template-example",children:"Template Example"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n  "title": "\ud83d\udd14 HertzBeat Alert Notification",\n  "status": "${status!"UNKNOWN"}",\n  "commonLabels": {\n    <#if commonLabels?? && commonLabels.severity??>\n    "severity": "${commonLabels.severity?switch("critical", "\u2764\ufe0f Critical", "warning", "\ud83d\udc9b Warning", "info", "\ud83d\udc9a Info", "Unknown")}"<#if commonLabels.alertname??>,</#if>\n    </#if>\n    <#if commonLabels?? && commonLabels.alertname??>\n    "alertName": "${commonLabels.alertname}"\n    </#if>\n  },\n  "alerts": [\n    <#if alerts?? && alerts?size gt 0>\n    <#list alerts as alert>\n    {\n      "index": ${alert?index + 1},\n      "labels": {\n        <#if alert.labels?? && alert.labels?size gt 0>\n        <#list alert.labels?keys as key>\n        "`key`": "${alert.labels[key]?json_string}"<#if key?has_next>,</#if>\n        </#list>\n        </#if>\n      },\n      <#if alert.content?? && alert.content != "">\n      "content": "${alert.content?json_string}",\n      </#if>\n      "triggerTimes": ${alert.triggerTimes!0},\n      "startAt": "${((alert.startAt!0)?number_to_datetime)?string(\'yyyy-MM-dd HH:mm:ss\')}",\n      <#if alert.activeAt?? && alert.activeAt gt 0>\n      "activeAt": "${((alert.activeAt!0)?number_to_datetime)?string(\'yyyy-MM-dd HH:mm:ss\')}",\n      </#if>\n      <#if alert.endAt?? && alert.endAt gt 0>\n      "endAt": "${(alert.endAt?number_to_datetime)?string(\'yyyy-MM-dd HH:mm:ss\')}"<#if alert.annotations?? && alert.annotations?size gt 0>,</#if>\n      </#if>\n      <#if alert.annotations?? && alert.annotations?size gt 0>\n      "annotations": {\n        <#list alert.annotations?keys as key>\n        "`key`": "${alert.annotations[key]?json_string}"<#if key?has_next>,</#if>\n        </#list>\n      }\n      </#if>\n    }<#if alert?has_next>,</#if>\n    </#list>\n    </#if>\n  ],\n  "commonAnnotations": {\n    <#if commonAnnotations?? && commonAnnotations?size gt 0>\n    <#list commonAnnotations?keys as key>\n    "`key`": "${commonAnnotations[key]?json_string}"<#if key?has_next>,</#if>\n    </#list>\n    </#if>\n  }\n}\n'})})]})}function m(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}}}]);