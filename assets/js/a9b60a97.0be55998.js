"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[82180],{8866(e,t,n){n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"start/upgrade","title":"HertzBeat New Version Upgrade","description":"HertzBeat Release Version List","source":"@site/docs/start/upgrade.md","sourceDirName":"start","slug":"/start/upgrade","permalink":"/docs/next/start/upgrade","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/docs/start/upgrade.md","tags":[],"version":"current","frontMatter":{"id":"upgrade","title":"HertzBeat New Version Upgrade","sidebar_label":"Version Upgrade Guide"},"sidebar":"docs","previous":{"title":"Update to 1.6.0 guide","permalink":"/docs/next/start/1.6.0-update"},"next":{"title":"Update Account Secret","permalink":"/docs/next/start/account-modify"}}');var r=n(86070),i=n(60056);const s={id:"upgrade",title:"HertzBeat New Version Upgrade",sidebar_label:"Version Upgrade Guide"},d=void 0,o={},l=[{value:"Upgrade For Docker Deploy",id:"upgrade-for-docker-deploy",level:3},{value:"Upgrade For Package Deploy",id:"upgrade-for-package-deploy",level:3}];function c(e){const t={a:"a",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"HertzBeat Release Version List"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://hertzbeat.apache.org/docs/download",children:"Download Page"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/apache/hertzbeat/releases",children:"Github Release"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://hub.docker.com/r/apache/hertzbeat/tags",children:"DockerHub Release"})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Apache HertzBeat's metadata information is stored in H2 or Mysql, PostgreSQL relational databases, and the collected metric data is stored in time series databases such as TDengine and IotDB."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"You need to save and back up the data files of the database and monitoring templates yml files before upgrading"})}),"\n",(0,r.jsx)(t.h3,{id:"upgrade-for-docker-deploy",children:"Upgrade For Docker Deploy"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["If using custom monitoring templates","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Need to back up docker templates directory ",(0,r.jsx)(t.code,{children:"docker cp hertzbeat:/opt/hertzbeat/define ./define"})," in the container ",(0,r.jsx)(t.code,{children:"/opt/hertzbeat/define"})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"docker cp hertzbeat:/opt/hertzbeat/define ./define"})}),"\n",(0,r.jsxs)(t.li,{children:["And mount the template define directory when docker start ",(0,r.jsx)(t.code,{children:"-v $(pwd)/define:/opt/hertzbeat/define"})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"-v $(pwd)/define:/opt/hertzbeat/define"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["If using the built-in default H2 database","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Need to mount or back up ",(0,r.jsx)(t.code,{children:"-v $(pwd)/data:/opt/hertzbeat/data"})," database file directory in the container ",(0,r.jsx)(t.code,{children:"/opt/hertzbeat/data"})]}),"\n",(0,r.jsx)(t.li,{children:"Stop and delete the container, delete the local HertzBeat docker image, and pull the new version image"}),"\n",(0,r.jsxs)(t.li,{children:["Refer to ",(0,r.jsx)(t.a,{href:"./docker-deploy",children:"Docker installation of HertzBeat"})," to create a new container using a new image. Note that the database file directory needs to be mounted ",(0,r.jsx)(t.code,{children:"-v $(pwd)/data:/opt/hertzbeat/data"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["If using external relational database Mysql, PostgreSQL","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"No need to mount the database file directory in the backup container"}),"\n",(0,r.jsx)(t.li,{children:"Stop and delete the container, delete the local HertzBeat docker image, and pull the new version image"}),"\n",(0,r.jsxs)(t.li,{children:["Refer to ",(0,r.jsx)(t.a,{href:"./docker-deploy",children:"Docker installation HertzBeat"})," to create a new container using the new image, and configure the database connection in ",(0,r.jsx)(t.code,{children:"application.yml"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"upgrade-for-package-deploy",children:"Upgrade For Package Deploy"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["If using the built-in default H2 database","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Back up the database file directory under the installation package ",(0,r.jsx)(t.code,{children:"/opt/hertzbeat/data"})]}),"\n",(0,r.jsxs)(t.li,{children:["If there is a custom monitoring template, you need to back up the template YML under ",(0,r.jsx)(t.code,{children:"/opt/hertzbeat/define"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"bin/shutdown.sh"})," stops the HertzBeat process and downloads the new installation package"]}),"\n",(0,r.jsxs)(t.li,{children:["Refer to ",(0,r.jsx)(t.a,{href:"./package-deploy",children:"Installation package to install HertzBeat"})," to start using the new installation package"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["If using external relational database Mysql, PostgreSQL","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"No need to back up the database file directory under the installation package"}),"\n",(0,r.jsxs)(t.li,{children:["If there is a custom monitoring template, you need to back up the template YML under ",(0,r.jsx)(t.code,{children:"/opt/hertzbeat/define"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"bin/shutdown.sh"})," stops the HertzBeat process and downloads the new installation package"]}),"\n",(0,r.jsxs)(t.li,{children:["Refer to ",(0,r.jsx)(t.a,{href:"./package-deploy",children:"Installation package to install HertzBeat"})," to start with the new installation package and configure the database connection in ",(0,r.jsx)(t.code,{children:"application.yml"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.strong,{children:"HAVE FUN"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},60056(e,t,n){n.d(t,{R:()=>s,x:()=>d});var a=n(30758);const r={},i=a.createContext(r);function s(e){const t=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);