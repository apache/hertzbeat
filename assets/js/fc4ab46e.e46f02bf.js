"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[81554],{7915:e=>{e.exports=JSON.parse('{"permalink":"/blog/2023/02/11/monitor-mysql","editUrl":"https://github.com/apache/hertzbeat/edit/master/home/blog/2023-02-11-monitor-mysql.md","source":"@site/blog/2023-02-11-monitor-mysql.md","title":"Use the open source real-time monitoring tool HertzBeat to monitor and alert Mysql database","description":"Use the open source real-time monitoring tool HertzBeat to monitor and alarm the Mysql database, and it will be done in 5 minutes","date":"2023-02-11T00:00:00.000Z","tags":[{"inline":true,"label":"opensource","permalink":"/blog/tags/opensource"},{"inline":true,"label":"practice","permalink":"/blog/tags/practice"}],"readingTime":5.45,"hasTruncateMarker":false,"authors":[{"name":"tom","title":"tom","url":"https://github.com/tomsun28","key":null,"page":null}],"frontMatter":{"title":"Use the open source real-time monitoring tool HertzBeat to monitor and alert Mysql database","author":"tom","author_title":"tom","author_url":"https://github.com/tomsun28","tags":["opensource","practice"],"Keywords":["Open source monitoring tool","open source database monitoring","Mysql database monitoring"]},"unlisted":false,"prevItem":{"title":"Monitoring Linux Operating Systems Using Open Source Real-Time Monitoring HertzBeat","permalink":"/blog/2023/02/15/monitor-linux"},"nextItem":{"title":"Welcome two new Committers from HertzBeat","permalink":"/blog/2023/02/10/new-committer"}}')},18928:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/monitor-mysql-1-19e6ec4459f0d9e919f6a6c30be7b57a.png"},23055:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var i=n(7915),o=n(86070),a=n(45906);const s={title:"Use the open source real-time monitoring tool HertzBeat to monitor and alert Mysql database",author:"tom",author_title:"tom",author_url:"https://github.com/tomsun28",tags:["opensource","practice"],Keywords:["Open source monitoring tool","open source database monitoring","Mysql database monitoring"]},r=void 0,l={authorsImageUrls:[void 0]},d=[{value:"Use the open source real-time monitoring tool HertzBeat to monitor and alarm the Mysql database, and it will be done in 5 minutes",id:"use-the-open-source-real-time-monitoring-tool-hertzbeat-to-monitor-and-alarm-the-mysql-database-and-it-will-be-done-in-5-minutes",level:2},{value:"Mysql database introduction",id:"mysql-database-introduction",level:3},{value:"Introduction to HertzBeat",id:"introduction-to-hertzbeat",level:3},{value:"Get the Mysql database monitoring in HertzBeat in 5 minutes",id:"get-the-mysql-database-monitoring-in-hertzbeat-in-5-minutes",level:3},{value:"The premise of the operation is that you already have the Mysql environment and the HertzBeat environment",id:"the-premise-of-the-operation-is-that-you-already-have-the-mysql-environment-and-the-hertzbeat-environment",level:4},{value:"Add monitoring of Mysql database on the open source monitoring tool HertzBeat monitoring page",id:"add-monitoring-of-mysql-database-on-the-open-source-monitoring-tool-hertzbeat-monitoring-page",level:4},{value:"3. Add Mysql database index threshold alarm in HertzBeat system",id:"3-add-mysql-database-index-threshold-alarm-in-hertzbeat-system",level:4},{value:"Finished, now wait for the warning message to come. ding ding ding ding",id:"finished-now-wait-for-the-warning-message-to-come-ding-ding-ding-ding",level:3},{value:"Summary",id:"summary",level:2}];function h(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"use-the-open-source-real-time-monitoring-tool-hertzbeat-to-monitor-and-alarm-the-mysql-database-and-it-will-be-done-in-5-minutes",children:"Use the open source real-time monitoring tool HertzBeat to monitor and alarm the Mysql database, and it will be done in 5 minutes"}),"\n",(0,o.jsx)(t.h3,{id:"mysql-database-introduction",children:"Mysql database introduction"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"MySQL is an open source relational database management system developed by the Swedish company MySQL AB and a product of Oracle. MySQL is one of the most popular open source relational database management systems. In terms of WEB applications, MySQL is one of the best RDBMS (Relational Database Management System, relational database management system) application software."}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"introduction-to-hertzbeat",children:"Introduction to HertzBeat"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"HertzBeat is an open source, easy-to-use and friendly real-time monitoring tool that does not require Agent and has powerful custom monitoring capabilities."}),"\n"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Integrate ",(0,o.jsx)(t.strong,{children:"monitoring-alarm-notification"}),", support monitoring of application services, databases, operating systems, middleware, cloud native, etc., threshold alarms, alarm notifications (email WeChat Dingding Feishu SMS Slack Discord Telegram)."]}),"\n",(0,o.jsx)(t.li,{children:"It configurable protocol specifications such as Http, Jmx, Ssh, Snmp, Jdbc, Prometheus, etc. You only need to configure YML to use these protocols to customize and collect any metrics you want to collect. Do you believe that you can immediately adapt to a new monitoring type such as K8s or Docker just by configuring YML?"}),"\n",(0,o.jsx)(t.li,{children:"HertzBeat's powerful customization, multi-type support, easy expansion, and low coupling, hope to help developers and small and medium teams quickly build their own monitoring tools."}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"get-the-mysql-database-monitoring-in-hertzbeat-in-5-minutes",children:"Get the Mysql database monitoring in HertzBeat in 5 minutes"}),"\n",(0,o.jsx)(t.h4,{id:"the-premise-of-the-operation-is-that-you-already-have-the-mysql-environment-and-the-hertzbeat-environment",children:"The premise of the operation is that you already have the Mysql environment and the HertzBeat environment"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Mysql ",(0,o.jsx)(t.a,{href:"https://www.runoob.com/mysql/mysql-install.html",children:"Installation and deployment document"})]}),"\n",(0,o.jsxs)(t.li,{children:["HertzBeat ",(0,o.jsx)(t.a,{href:"https://hertzbeat.apache.org/docs/start/docker-deploy",children:"Installation and deployment documentation"})]}),"\n"]}),"\n",(0,o.jsx)(t.h4,{id:"add-monitoring-of-mysql-database-on-the-open-source-monitoring-tool-hertzbeat-monitoring-page",children:"Add monitoring of Mysql database on the open source monitoring tool HertzBeat monitoring page"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Click Add Mysql Monitoring"}),"\n",(0,o.jsx)(t.p,{children:"Path: Menu -> Database Monitoring -> Mysql Database -> Add Mysql Database Monitoring"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(18928).A+"",width:"4064",height:"2166"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Configure the parameters required for the new monitoring Mysql database"}),"\n",(0,o.jsxs)(t.p,{children:["On the monitoring page, fill in Mysql ",(0,o.jsx)(t.strong,{children:"service IP"}),", ",(0,o.jsx)(t.strong,{children:"monitoring port"})," (default 3306), ",(0,o.jsx)(t.strong,{children:"account password, etc."}),", and finally click OK to add.\nFor other parameters such as ",(0,o.jsx)(t.strong,{children:"collection interval"}),", ",(0,o.jsx)(t.strong,{children:"timeout period"}),", etc., please refer to ",(0,o.jsx)(t.a,{href:"https://hertzbeat.apache.org/docs/help/mysql/",children:"Help Documentation"})," ",(0,o.jsx)(t.a,{href:"https://hertzbeat.apache.org/docs/help",children:"https://hertzbeat.apache.org/docs/help"})," /mysql/"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(72427).A+"",width:"4064",height:"2166"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Complete \u2705, now we have added the monitoring of the Mysql database, check the monitoring list to see our added items."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(18928).A+"",width:"4064",height:"2166"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Click ",(0,o.jsx)(t.strong,{children:"Operation"}),"->",(0,o.jsx)(t.strong,{children:"Monitoring Details Icon"})," of the monitoring list item to browse the real-time monitoring metric data of the Mysql database."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(51298).A+"",width:"4064",height:"2166"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Click ",(0,o.jsx)(t.strong,{children:"Monitoring History Details TAB"})," to browse the historical monitoring metric data chart of Mysql database\ud83d\udcc8."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(47645).A+"",width:"4064",height:"2166"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"DONE! Done! Through the above steps, in fact, it only takes one step to sum up"})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.strong,{children:"On the HertzBeat monitoring page, configure the IP port account password and add Mysql monitoring"})}),"\n"]}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsx)(t.p,{children:"Through the above two steps, we have completed the monitoring of the Mysql database. We can view the monitoring details and metrics in HertzBeat at any time to observe its service status.\nOf course, just looking at it is definitely not perfect. Monitoring is often accompanied by alarm thresholds. When the metrics of the Mysql database exceed our expectations or are abnormal, we can promptly notify our corresponding person in charge. The person in charge receives the notification and handles the problem. It is a complete monitoring and alarm process."})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Next, we will demonstrate step by step how to configure the threshold alarm notification in the HertzBeat system, so that when the metrics of the Mysql database are found to be abnormal, they will be notified to us in time"})}),"\n",(0,o.jsx)(t.h4,{id:"3-add-mysql-database-index-threshold-alarm-in-hertzbeat-system",children:"3. Add Mysql database index threshold alarm in HertzBeat system"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Configure an alarm threshold for an important metric"}),"\n",(0,o.jsx)(t.p,{children:"Path: Menu -> Threshold Rules -> Add Threshold"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Select the configured metric object. Mysql database monitoring is mainly about database performance and other related metrics. For example, we set the threshold for the metric ",(0,o.jsx)(t.code,{children:"query cache hit rate"})," ",(0,o.jsx)(t.code,{children:"cache"})," -> ",(0,o.jsx)(t.code,{children:"query_cache_hit_rate"}),". When the query cache hit rate of Mysql is very low An alarm is issued when it is less than 30%."]}),"\n",(0,o.jsxs)(t.li,{children:["Here we configure to send an alarm when the ",(0,o.jsx)(t.code,{children:"query_cache_hit_rate<30"})," of this metric ",(0,o.jsx)(t.code,{children:"cache"}),", the alarm level is ",(0,o.jsx)(t.strong,{children:"serious alarm"}),", and it will be triggered after three times, as shown in the figure below."]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(26516).A+"",width:"4064",height:"2166"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(45423).A+"",width:"4064",height:"2166"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Add message notification recipients"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"Configure the receiver to let the alarm message know who to send and how to send it."}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Path: Menu -> Alarm Notification -> Alarm Recipient -> Add New Recipient"}),"\n",(0,o.jsxs)(t.p,{children:["Message notification methods support ",(0,o.jsx)(t.strong,{children:"email, DingTalk, WeChat Work, Feishu, WebHook, SMS"}),", etc. Here we take the commonly used DingTalk as an example."]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Refer to this ",(0,o.jsx)(t.a,{href:"https://hertzbeat.apache.org/docs/help/alert_dingtalk",children:"Help Documentation"})," ",(0,o.jsx)(t.a,{href:"https://hertzbeat.apache.org/docs/help/alert_dingtalk",children:"https://hertzbeat.apache.org/docs/help/alert_dingtalk"})," to configure the robot on DingTalk and set the security custom keyword ",(0,o.jsx)(t.code,{children:"HertzBeat"}),", get the corresponding ",(0,o.jsx)(t.code,{children:"access_token"})," value."]}),"\n",(0,o.jsx)(t.li,{children:"Configure the receiver parameters in HertzBeat as follows."}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"\u3010Alarm Notification\u3011->\u3010New Recipient\u3011->\u3010Select DingTalk Robot Notification Method\u3011->\u3010Set DingTalk Robot ACCESS_TOKEN\u3011->\u3010OK\u3011"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(46228).A+"",width:"3436",height:"890"})}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsx)(t.p,{children:"Configure the associated alarm notification strategy \u26a0\ufe0f [Add notification strategy] -> [Associate the recipient just set] -> [OK]"}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"Configure the alarm notification policy to bind the alarm message with the receiver, so that you can decide which alarms to send to whom."}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"HertzBeat",src:n(65135).A+"",width:"3436",height:"1088"})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"finished-now-wait-for-the-warning-message-to-come-ding-ding-ding-ding",children:"Finished, now wait for the warning message to come. ding ding ding ding"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-text",children:"[HertzBeat warning notification]\nAlarm target object: mysql.cahce.query_cache_hit_rate\nAffiliated monitoring ID: 205540620394932\nBelonging monitoring name: Mysql_localhost\nAlarm level: major alarm\nAlarm trigger time: 2023-02-11 21:13:44\nContent details: mysql db query_cache_hit_rate is too low, now is 20.\n"})}),"\n",(0,o.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsxs)(t.p,{children:["This practical article took us to experience how to use the open source real-time monitoring tool HertzBeat to monitor Mysql database metric data. We can find that HertzBeat, which integrates ",(0,o.jsx)(t.code,{children:"monitoring-alarm-notification"}),", is more convenient in operation and use, just click on the page The Mysql database can be included in the monitoring and alarm notification, and the tedious operations of deploying multiple components and writing configuration files are no longer needed."]})}),"\n",(0,o.jsxs)(t.p,{children:["Mysql Github: ",(0,o.jsx)(t.a,{href:"https://github.com/mysql/mysql-server",children:"https://github.com/mysql/mysql-server"}),"\nHertzBeat Github: ",(0,o.jsx)(t.a,{href:"https://github.com/apache/hertzbeat",children:"https://github.com/apache/hertzbeat"})]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Welcome to learn, use and star!"})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"Only one docker command is needed to install and experience heartbeat:"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.code,{children:"docker run -d -p 1157:1157 --name hertzbeat apache/hertzbeat"})})]})}function c(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},26516:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/monitor-mysql-5-de9e52572120721588e3ec4207999d97.png"},45423:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/monitor-mysql-6-734d367e3a2cd939c75d3ea9204bd615.png"},45906:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var i=n(30758);const o={},a=i.createContext(o);function s(e){const t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:t},e.children)}},46228:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/alert-notice-1-3bad6e06e2c870849bc656a2092d59ac.png"},47645:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/monitor-mysql-4-3283b82611bd5f8e97a5ee6c58b2258c.png"},51298:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/monitor-mysql-3-d6896c6d4ffd9c2b6e947b2953e784f1.png"},65135:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/alert-notice-2-8025b90624873463fe0a3f75bd7efafa.png"},72427:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/monitor-mysql-2-13a14e1ef2e6ce1aad18487061354b44.png"}}]);