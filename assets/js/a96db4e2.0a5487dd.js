"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[37608],{65297(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"help/nacos_sd","title":"Monitoring Nacos Service Discovery","description":"HertzBeat integrates with Nacos registry to automatically discover service instances and create monitoring tasks for them.","source":"@site/docs/help/nacos_sd.md","sourceDirName":"help","slug":"/help/nacos_sd","permalink":"/docs/next/help/nacos_sd","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/docs/help/nacos_sd.md","tags":[],"version":"current","frontMatter":{"id":"nacos_sd","title":"Monitoring Nacos Service Discovery","sidebar_label":"Nacos Service Discovery","keywords":["open source monitoring tool","open source service discovery monitoring tool","monitoring Nacos service discovery"]},"sidebar":"docs","previous":{"title":"Eureka Service Discovery","permalink":"/docs/next/help/eureka_sd"},"next":{"title":"Consul Service Discovery","permalink":"/docs/next/help/consul_sd"}}');var r=i(86070),t=i(60056);const o={id:"nacos_sd",title:"Monitoring Nacos Service Discovery",sidebar_label:"Nacos Service Discovery",keywords:["open source monitoring tool","open source service discovery monitoring tool","monitoring Nacos service discovery"]},c=void 0,l={},a=[{value:"Overview",id:"overview",level:3},{value:"PreRequisites",id:"prerequisites",level:3},{value:"Deploy Nacos Server",id:"deploy-nacos-server",level:4},{value:"Configuration parameter",id:"configuration-parameter",level:3},{value:"Usage Steps",id:"usage-steps",level:3},{value:"Example of usage",id:"example-of-usage",level:3},{value:"Notes",id:"notes",level:3},{value:"Collection Metric",id:"collection-metric",level:3},{value:"Metric set: Monitor Target",id:"metric-set-monitor-target",level:4},{value:"Use Cases",id:"use-cases",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"HertzBeat integrates with Nacos registry to automatically discover service instances and create monitoring tasks for them."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"Nacos Service Discovery allows HertzBeat to connect to your Nacos server and automatically discover all registered service instances. When a new service instance is registered or an existing instance goes offline, HertzBeat will automatically create or delete corresponding monitoring tasks, achieving automated monitoring in microservice environments."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"PreRequisites"}),"\n",(0,r.jsx)(n.h4,{id:"deploy-nacos-server",children:"Deploy Nacos Server"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Deploy Nacos server according to ",(0,r.jsx)(n.a,{href:"https://nacos.io/en-us/docs/quick-start.html",children:"Nacos official documentation"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Ensure Nacos server is accessible from HertzBeat."}),"\n",(0,r.jsxs)(n.li,{children:["Verify that you can access Nacos console at ",(0,r.jsx)(n.code,{children:"http://your-nacos-server:8848/nacos/"})]}),"\n",(0,r.jsxs)(n.li,{children:["Default credentials: username ",(0,r.jsx)(n.code,{children:"nacos"}),", password ",(0,r.jsx)(n.code,{children:"nacos"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-parameter",children:"Configuration parameter"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter name"}),(0,r.jsx)(n.th,{children:"Parameter help description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Target Name"}),(0,r.jsx)(n.td,{children:"Identify the name of this monitoring. The name needs to be unique."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Nacos Service Discovery Host"}),(0,r.jsxs)(n.td,{children:["Nacos server IP address or domain name. Note\u26a0\ufe0fWithout protocol header (eg: https://, http://). Example: ",(0,r.jsx)(n.code,{children:"nacos-server"})," or ",(0,r.jsx)(n.code,{children:"192.168.1.100"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Nacos Service Discovery Port"}),(0,r.jsx)(n.td,{children:"Port provided by the Nacos server. The default is 8848"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Collection interval"}),(0,r.jsx)(n.td,{children:"Interval time of monitor periodic data collection, unit: second, and the minimum interval that can be set is 30 seconds."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Description remarks"}),(0,r.jsx)(n.td,{children:"For more information about identifying and describing this monitoring, users can note information here."})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"usage-steps",children:"Usage Steps"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create Service Discovery Monitoring"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In HertzBeat web UI, navigate to ",(0,r.jsx)(n.strong,{children:"Monitoring"})," \u2192 ",(0,r.jsx)(n.strong,{children:"New Monitoring"})]}),"\n",(0,r.jsxs)(n.li,{children:["Select monitoring type: ",(0,r.jsx)(n.strong,{children:"Nacos Service Discovery"})]}),"\n",(0,r.jsx)(n.li,{children:"Fill in the basic configuration parameters"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configure Monitoring Template"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"After creating the service discovery monitoring, you need to specify a monitoring template"}),"\n",(0,r.jsx)(n.li,{children:"The template defines what type of monitoring to create for discovered service instances"}),"\n",(0,r.jsx)(n.li,{children:"For example: If discovered instances are HTTP services, you can select HTTP monitoring template"}),"\n",(0,r.jsx)(n.li,{children:"Common template types: Port, HTTP, HTTPS, etc."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Automatic Discovery"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"HertzBeat will periodically query Nacos server based on the collection interval"}),"\n",(0,r.jsx)(n.li,{children:"Automatically create monitoring tasks for newly registered service instances"}),"\n",(0,r.jsx)(n.li,{children:"Automatically delete monitoring tasks for offline service instances"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"View Discovered Instances"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"In the monitoring list, you can see all automatically created sub-monitoring tasks"}),"\n",(0,r.jsx)(n.li,{children:"Each sub-monitoring task corresponds to a discovered service instance"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"example-of-usage",children:"Example of usage"}),"\n",(0,r.jsxs)(n.p,{children:["Suppose your Nacos server is running at ",(0,r.jsx)(n.code,{children:"192.168.1.100:8848"}),", and you want to automatically monitor all service instances registered in it."]}),"\n",(0,r.jsx)(n.p,{children:"Configuration example:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Target Name"}),": ",(0,r.jsx)(n.code,{children:"Nacos-Service-Discovery"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nacos Service Discovery Host"}),": ",(0,r.jsx)(n.code,{children:"192.168.1.100"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Nacos Service Discovery Port"}),": ",(0,r.jsx)(n.code,{children:"8848"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Collection interval"}),": ",(0,r.jsx)(n.code,{children:"60"})," seconds"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitoring Template"}),": Select ",(0,r.jsx)(n.code,{children:"Port"})," monitoring (to detect instance availability)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"After configuration:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"HertzBeat connects to Nacos server"}),"\n",(0,r.jsx)(n.li,{children:"Retrieves all registered service instances (including healthy and unhealthy instances)"}),"\n",(0,r.jsxs)(n.li,{children:["Automatically creates Port monitoring for each instance (e.g., ",(0,r.jsx)(n.code,{children:"user-service-192.168.1.101:8080"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Every 60 seconds, checks for newly registered or offline services and updates monitoring tasks accordingly"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Network Connectivity"}),": Ensure HertzBeat can access the Nacos server address and port"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitoring Templates"}),": Service discovery only discovers service instance addresses, you need to configure appropriate monitoring templates to actually monitor the instances"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Collection Interval"}),": Recommended minimum interval is 60 seconds to avoid excessive requests to Nacos server"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Namespace"}),": By default, discovers services in the public namespace. If you need to discover services in a specific namespace, you may need to configure it separately"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Health Check"}),": Nacos service discovery will discover all instances, including unhealthy ones"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Instance Naming"}),": Automatically created monitoring tasks are named in the format: ",(0,r.jsx)(n.code,{children:"{ServiceName}-{Host}:{Port}"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"collection-metric",children:"Collection Metric"}),"\n",(0,r.jsx)(n.h4,{id:"metric-set-monitor-target",children:"Metric set: Monitor Target"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Metric name"}),(0,r.jsx)(n.th,{children:"Metric unit"}),(0,r.jsx)(n.th,{children:"Metric help description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"target"}),(0,r.jsx)(n.td,{children:"none"}),(0,r.jsx)(n.td,{children:"Discovered service instance target"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"host"}),(0,r.jsx)(n.td,{children:"none"}),(0,r.jsx)(n.td,{children:"Service instance host address"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"port"}),(0,r.jsx)(n.td,{children:"none"}),(0,r.jsx)(n.td,{children:"Service instance port number"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"use-cases",children:"Use Cases"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Spring Cloud Alibaba"}),": Automatically monitor all microservice instances registered in Nacos"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dynamic Scaling"}),": Automatically adapt to service instances added/removed due to autoscaling"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Unified Monitoring"}),": Centrally manage monitoring of all services in the microservice environment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Multi-Environment"}),": Manage services across development, testing, and production environments"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service Governance"}),": Combine with Nacos service governance capabilities for comprehensive service management"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},60056(e,n,i){i.d(n,{R:()=>o,x:()=>c});var s=i(30758);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);