"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[25924],{28032(e,t,n){n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"help/dynamic_tp","title":"Monitoring DynamicTp ThreadPool","description":"Collect and monitor the thread pool performance Metrics exposed by DynamicTp actuator.","source":"@site/versioned_docs/version-1.7.x/help/dynamic_tp.md","sourceDirName":"help","slug":"/help/dynamic_tp","permalink":"/docs/1.7.x/help/dynamic_tp","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/versioned_docs/version-1.7.x/help/dynamic_tp.md","tags":[],"version":"1.7.x","frontMatter":{"id":"dynamic_tp","title":"Monitoring DynamicTp ThreadPool","sidebar_label":"DynamicTp Monitor","keywords":["open source monitoring tool","open source dynamicTp monitoring tool","monitoring DynamicTp metrics"]},"sidebar":"docs","previous":{"title":"SpringBoot 3.0","permalink":"/docs/1.7.x/help/springboot3"},"next":{"title":"MySQL database","permalink":"/docs/1.7.x/help/mysql"}}');var r=n(86070),s=n(60056);const o={id:"dynamic_tp",title:"Monitoring DynamicTp ThreadPool",sidebar_label:"DynamicTp Monitor",keywords:["open source monitoring tool","open source dynamicTp monitoring tool","monitoring DynamicTp metrics"]},d=void 0,c={},l=[{value:"PreRequisites",id:"prerequisites",level:3},{value:"Configuration parameters",id:"configuration-parameters",level:3},{value:"Collect metrics",id:"collect-metrics",level:3},{value:"Metric collection: thread_pool",id:"metric-collection-thread_pool",level:4}];function a(e){const t={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"Collect and monitor the thread pool performance Metrics exposed by DynamicTp actuator."}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"prerequisites",children:"PreRequisites"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Integration Using ",(0,r.jsx)(t.code,{children:"DynamicTp"})]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"DynamicTp"})," is a lightweight dynamic thread pool based on the configuration center of the Jvm language. It has built-in monitoring and alarm functions, which can be realized through SPI custom extensions."]}),"\n",(0,r.jsxs)(t.p,{children:["For integrated use, please refer to the document ",(0,r.jsx)(t.a,{href:"https://dynamictp.cn/guide/use/quick-start.html",children:"Quick Start"})]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Open SpringBoot Actuator Endpoint to expose ",(0,r.jsx)(t.code,{children:"DynamicTp"})," Metric interface"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"management:\n   endpoints:\n     web:\n       exposure:\n         include: '*'\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Test whether the access Metric interface ",(0,r.jsx)(t.code,{children:"ip:port/actuator/dynamic-tp"})," has response json data as follows:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'[\n   {\n     "poolName": "commonExecutor",\n     "corePoolSize": 1,\n     "maximumPoolSize": 1,\n     "queueType": "LinkedBlockingQueue",\n     "queueCapacity": 2147483647,\n     "queueSize": 0,\n     "fair": false,\n     "queueRemainingCapacity": 2147483647,\n     "activeCount": 0,\n     "taskCount": 0,\n     "completedTaskCount": 0,\n     "largestPoolSize": 0,\n     "poolSize": 0,\n     "waitTaskCount": 0,\n     "rejectCount": 0,\n     "rejectHandlerName": null,\n     "dynamic": false,\n     "runTimeoutCount": 0,\n     "queueTimeoutCount": 0\n   },\n   {\n     "maxMemory": "4GB",\n     "totalMemory": "444MB",\n     "freeMemory": "250.34 MB",\n     "usableMemory": "3.81GB"\n   }\n]\n'})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Add DynamicTp monitoring under HertzBeat middleware monitoring"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"configuration-parameters",children:"Configuration parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter name"}),(0,r.jsx)(t.th,{children:"Parameter help description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Monitoring Host"}),(0,r.jsx)(t.td,{children:"The peer IPV4, IPV6 or domain name to be monitored. Note \u26a0\ufe0fWithout protocol header (eg: https://, http://)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Monitoring name"}),(0,r.jsx)(t.td,{children:"The name that identifies this monitoring, and the name needs to be unique."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Port"}),(0,r.jsx)(t.td,{children:"The port provided by the application service, the default is 8080."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Enable HTTPS"}),(0,r.jsx)(t.td,{children:"Whether to access the website through HTTPS, note \u26a0\ufe0fEnable HTTPS, the default corresponding port needs to be changed to 443"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Base Path"}),(0,r.jsx)(t.td,{children:"Exposed interface path prefix, default /actuator"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Acquisition Interval"}),(0,r.jsx)(t.td,{children:"Interval time for monitoring periodic data collection, in seconds, the minimum interval that can be set is 30 seconds"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Whether to detect"}),(0,r.jsx)(t.td,{children:"Whether to detect and check the availability of monitoring before adding monitoring, and the operation of adding and modifying will continue after the detection is successful"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Description Remarks"}),(0,r.jsx)(t.td,{children:"More remark information to identify and describe this monitoring, users can remark information here"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"collect-metrics",children:"Collect metrics"}),"\n",(0,r.jsx)(t.h4,{id:"metric-collection-thread_pool",children:"Metric collection: thread_pool"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"pool_name"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Thread pool name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"core_pool_size"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of core threads"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"maximum_pool_size"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Maximum number of threads"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"queue_type"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Task queue type"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"queue_capacity"}),(0,r.jsx)(t.td,{children:"MB"}),(0,r.jsx)(t.td,{children:"task queue capacity"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"queue_size"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"The current occupied size of the task queue"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"fair"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Queue mode, SynchronousQueue will be used"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"queue_remaining_capacity"}),(0,r.jsx)(t.td,{children:"MB"}),(0,r.jsx)(t.td,{children:"task queue remaining size"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"active_count"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of active threads"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"task_count"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Total number of tasks"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"completed_task_count"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of completed tasks"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"largest_pool_size"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"The largest number of threads in history"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"pool_size"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"current number of threads"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"wait_task_count"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of tasks waiting to be executed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"reject_count"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of rejected tasks"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"reject_handler_name"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Reject policy type"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"dynamic"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Dynamic thread pool or not"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"run_timeout_count"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of running timeout tasks"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"queue_timeout_count"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of tasks waiting for timeout"})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},60056(e,t,n){n.d(t,{R:()=>o,x:()=>d});var i=n(30758);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);