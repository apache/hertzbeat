"use strict";(self.webpackChunkhertzbeat=self.webpackChunkhertzbeat||[]).push([[73003],{15680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>d});var r=a(96540);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(a),d=n,h=m["".concat(s,".").concat(d)]||m[d]||g[d]||o;return a?r.createElement(h,i(i({ref:t},p),{},{components:a})):r.createElement(h,i({ref:t},p))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:n,i[1]=l;for(var c=2;c<o;c++)i[c]=a[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},30189:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var r=a(58168),n=(a(96540),a(15680));const o={id:"alert_telegram",title:"Alert Telegram Bot Notification",sidebar_label:"Alert Telegram bot notification",keywords:["open source monitoring tool","open source alerter","open source Telegram bot notification"]},i=void 0,l={unversionedId:"help/alert_telegram",id:"help/alert_telegram",title:"Alert Telegram Bot Notification",description:"Send an alarm message after the threshold is triggered, and notify the recipient through the Telegram robot.",source:"@site/docs/help/alert_telegram.md",sourceDirName:"help",slug:"/help/alert_telegram",permalink:"/docs/help/alert_telegram",draft:!1,editUrl:"https://github.com/apache/hertzbeat/edit/master/home/docs/help/alert_telegram.md",tags:[],version:"current",frontMatter:{id:"alert_telegram",title:"Alert Telegram Bot Notification",sidebar_label:"Alert Telegram bot notification",keywords:["open source monitoring tool","open source alerter","open source Telegram bot notification"]},sidebar:"docs",previous:{title:"Alert Slack Webhook Notification",permalink:"/docs/help/alert_slack"},next:{title:"Alert enterprise Wechat notification",permalink:"/docs/help/alert_wework"}},s={},c=[{value:"Steps",id:"steps",level:2},{value:"Create a bot in Telegram, get Bot Token and UserId",id:"create-a-bot-in-telegram-get-bot-token-and-userid",level:3},{value:"Add an alarm notification person to HertzBeat, the notification method is Telegram Bot",id:"add-an-alarm-notification-person-to-hertzbeat-the-notification-method-is-telegram-bot",level:3},{value:"Telegram Bot Notification FAQ",id:"telegram-bot-notification-faq",level:3}],p={toc:c};function g(e){let{components:t,...o}=e;return(0,n.yg)("wrapper",(0,r.A)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("blockquote",null,(0,n.yg)("p",{parentName:"blockquote"},"Send an alarm message after the threshold is triggered, and notify the recipient through the Telegram robot.")),(0,n.yg)("h2",{id:"steps"},"Steps"),(0,n.yg)("h3",{id:"create-a-bot-in-telegram-get-bot-token-and-userid"},"Create a bot in Telegram, get Bot Token and UserId"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"Use ",(0,n.yg)("a",{parentName:"p",href:"https://t.me/BotFather"},"@BotFather")," to create your own bot and get an access token ",(0,n.yg)("inlineCode",{parentName:"p"},"Token")),(0,n.yg)("p",{parentName:"li"},(0,n.yg)("img",{alt:"telegram-bot",src:a(43689).A,width:"497",height:"524"}))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"Get the ",(0,n.yg)("inlineCode",{parentName:"p"},"User ID")," of the recipient"),(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Use the recipient account you want to notify to send a message to the newly created Bot account"),",\nVisit ",(0,n.yg)("inlineCode",{parentName:"p"},"https://api.telegram.org/bot<TOKEN>/getUpdates"),", ",(0,n.yg)("strong",{parentName:"p"},(0,n.yg)("inlineCode",{parentName:"strong"},"use the Bot Token from the previous step to replace the <TOKEN>")),", and respond to the first in the ",(0,n.yg)("inlineCode",{parentName:"p"},"Json")," data A ",(0,n.yg)("inlineCode",{parentName:"p"},"result.message.from.id")," value is the recipient's ",(0,n.yg)("inlineCode",{parentName:"p"},"User ID")),(0,n.yg)("pre",{parentName:"li"},(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{\n     "ok": true,\n     "result": [\n         {\n             "update_id": 632299191,\n             "message": {\n                 "from":{\n                     "id": "User ID"\n                 },\n                 "chat":{\n                 },\n                 "date": 1673858065,\n                 "text": "111"\n             }\n         }\n     ]\n}\n'))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"Record and save the ",(0,n.yg)("inlineCode",{parentName:"p"},"Token")," and ",(0,n.yg)("inlineCode",{parentName:"p"},"User Id")," we got"))),(0,n.yg)("h3",{id:"add-an-alarm-notification-person-to-hertzbeat-the-notification-method-is-telegram-bot"},"Add an alarm notification person to HertzBeat, the notification method is Telegram Bot"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"\u3010Alarm Notification\u3011->\u3010Add Recipient\u3011->\u3010Select Telegram Robot Notification Method\u3011->\u3010Set Robot Token and UserId\u3011-> \u3010OK\u3011")),(0,n.yg)("p",{parentName:"li"},(0,n.yg)("img",{alt:"email",src:a(95506).A,width:"3804",height:"1160"}))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Configure the associated alarm notification strategy\u26a0\ufe0f ","[Add notification strategy]"," -> ","[Associate the recipient just set]"," -> ","[OK]")),(0,n.yg)("blockquote",{parentName:"li"},(0,n.yg)("p",{parentName:"blockquote"},(0,n.yg)("strong",{parentName:"p"},"Note \u26a0\ufe0f Adding a new recipient does not mean that it has taken effect and can receive alarm information. It is also necessary to configure the associated alarm notification strategy, that is, specify which messages are sent to which recipients"),".")),(0,n.yg)("p",{parentName:"li"},(0,n.yg)("img",{alt:"email",src:a(82174).A,width:"3778",height:"1284"})))),(0,n.yg)("h3",{id:"telegram-bot-notification-faq"},"Telegram Bot Notification FAQ"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},"Telegram did not receive the robot warning notification"),(0,n.yg)("blockquote",{parentName:"li"},(0,n.yg)("p",{parentName:"blockquote"},"Please check whether the alarm information has been triggered in the alarm center",(0,n.yg)("br",{parentName:"p"}),"\n","Please check whether the robot Token and UserId are configured correctly, and whether the alarm policy association has been configured",(0,n.yg)("br",{parentName:"p"}),"\n","UserId should be the UserId of the recipient of the message  ")))),(0,n.yg)("p",null,"Other questions can be fed back through the communication group ISSUE!"))}g.isMDXComponent=!0},82174:(e,t,a)=>{a.d(t,{A:()=>r});const r=a.p+"assets/images/alert-notice-policy-a44e898a35d581c7bb8f52bd2499387f.png"},43689:(e,t,a)=>{a.d(t,{A:()=>r});const r=a.p+"assets/images/telegram-bot-1-e6f0d00c5bc63442aaafadaf7e342955.png"},95506:(e,t,a)=>{a.d(t,{A:()=>r});const r=a.p+"assets/images/telegram-bot-2-039d3aac3929dbb813e3547e707384ce.png"}}]);