"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[28759],{72986(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"help/nacos","title":"Monitoring\uff1aNacos Server monitoring","description":"Hertzbeat monitors metrics of the Nacos Server by calling the Nacos Metrics Api.","source":"@site/docs/help/nacos.md","sourceDirName":"help","slug":"/help/nacos","permalink":"/docs/next/help/nacos","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/docs/help/nacos.md","tags":[],"version":"current","frontMatter":{"id":"nacos","title":"Monitoring\uff1aNacos Server monitoring","sidebar_label":"Nacos Server","keywords":["open source monitoring tool","open source middleware monitoring tool","monitoring Nacos Server metrics"]},"sidebar":"docs","previous":{"title":"Apache Pulsar","permalink":"/docs/next/help/pulsar"},"next":{"title":"RabbitMQ Monitor","permalink":"/docs/next/help/rabbitmq"}}');var c=s(86070),i=s(60056);const r={id:"nacos",title:"Monitoring\uff1aNacos Server monitoring",sidebar_label:"Nacos Server",keywords:["open source monitoring tool","open source middleware monitoring tool","monitoring Nacos Server metrics"]},d=void 0,o={},l=[{value:"PreRequisites",id:"prerequisites",level:3},{value:"Deploy Nacos cluster to expose metrics data",id:"deploy-nacos-cluster-to-expose-metrics-data",level:4},{value:"Configuration parameter",id:"configuration-parameter",level:3},{value:"Collection Metric",id:"collection-metric",level:3},{value:"Metric set\uff1ajvm",id:"metric-setjvm",level:4},{value:"Metric set\uff1aNacos",id:"metric-setnacos",level:4},{value:"Metric set\uff1aNacos exception",id:"metric-setnacos-exception",level:4},{value:"Metric set\uff1aclient",id:"metric-setclient",level:4}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"Hertzbeat monitors metrics of the Nacos Server by calling the Nacos Metrics Api."}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"prerequisites",children:"PreRequisites"}),"\n",(0,c.jsx)(n.h4,{id:"deploy-nacos-cluster-to-expose-metrics-data",children:"Deploy Nacos cluster to expose metrics data"}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Deploy the Nacos cluster according to ",(0,c.jsx)(n.a,{href:"https://nacos.io/en-us/docs/deployment.html",children:"deployment document"}),"."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Configure the application. properties file to expose metrics data."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-properties",children:"management.endpoints.web.exposure.include=*\n"})}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:["Access ",(0,c.jsx)(n.code,{children:"{ip}:8848/nacos/actuator/prometheus"})," to see if metrics data can be accessed."]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["More information see ",(0,c.jsx)(n.a,{href:"https://nacos.io/en-us/docs/monitor-guide.html",children:"Nacos monitor guide"}),"."]}),"\n",(0,c.jsx)(n.h3,{id:"configuration-parameter",children:"Configuration parameter"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Parameter name"}),(0,c.jsx)(n.th,{children:"Parameter help description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Target Host"}),(0,c.jsx)(n.td,{children:"Monitored IPV4, IPV6 or domain name. Note\u26a0\ufe0fWithout protocol header (eg: https://, http://)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Target name"}),(0,c.jsx)(n.td,{children:"Identify the name of this monitoring. The name needs to be unique"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Nacos Port"}),(0,c.jsx)(n.td,{children:"Port provided by the Nacos Server. The default is 8848"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Collection interval"}),(0,c.jsx)(n.td,{children:"Interval time of monitor periodic data collection, unit: second, and the minimum interval that can be set is 30 seconds"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"Description remarks"}),(0,c.jsx)(n.td,{children:"For more information about identifying and describing this monitoring, users can note information here"})]})]})]}),"\n",(0,c.jsx)(n.h3,{id:"collection-metric",children:"Collection Metric"}),"\n",(0,c.jsx)(n.h4,{id:"metric-setjvm",children:"Metric set\uff1ajvm"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Metric name"}),(0,c.jsx)(n.th,{children:"Metric unit"}),(0,c.jsx)(n.th,{children:"Metric help description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"system_cpu_usage"}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"cpu usage"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"system_load_average_1m"}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"load"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"jvm_memory_used_bytes"}),(0,c.jsx)(n.td,{children:"byte"}),(0,c.jsx)(n.td,{children:"jvm memory used"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"jvm_memory_max_bytes"}),(0,c.jsx)(n.td,{children:"byte"}),(0,c.jsx)(n.td,{children:"jvm max memory"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"jvm_gc_pause_seconds_count"}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"gc count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"jvm_gc_pause_seconds_sum"}),(0,c.jsx)(n.td,{children:"second"}),(0,c.jsx)(n.td,{children:"gc time"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"jvm_threads_daemon"}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"jvm threads count"})]})]})]}),"\n",(0,c.jsx)(n.h4,{id:"metric-setnacos",children:"Metric set\uff1aNacos"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Metric name"}),(0,c.jsx)(n.th,{children:"Metric unit"}),(0,c.jsx)(n.th,{children:"Metric help description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"http_server_requests_seconds_count"}),(0,c.jsx)(n.td,{children:"second"}),(0,c.jsx)(n.td,{children:"http requests count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"http_server_requests_seconds_sum"}),(0,c.jsx)(n.td,{children:"second"}),(0,c.jsx)(n.td,{children:"http requests time"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"nacos_timer_seconds_sum"}),(0,c.jsx)(n.td,{children:"second"}),(0,c.jsx)(n.td,{children:"Nacos config notify time"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"nacos_timer_seconds_count"}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos config notify count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="longPolling"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos config connection count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="configCount"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos configuration file count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="dumpTask"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos config dump task count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="notifyTask"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos config notify task count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="getConfig"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos config read configuration count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="publish"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos config update configuration count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="ipCount"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming ip count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="domCount"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming domain count(1.x version)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="serviceCount"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming domain count(2.x version)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="failedPush"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming push fail count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="avgPushCost"}'})]}),(0,c.jsx)(n.td,{children:"second"}),(0,c.jsx)(n.td,{children:"Nacos naming push cost time(average)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="leaderStatus"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming if node is leader"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="maxPushCost"}'})]}),(0,c.jsx)(n.td,{children:"second"}),(0,c.jsx)(n.td,{children:"Nacos naming push cost time(max)"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="mysqlhealthCheck"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming mysql health check count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="httpHealthCheck"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming http health check count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="tcpHealthCheck"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming tcp health check count"})]})]})]}),"\n",(0,c.jsx)(n.h4,{id:"metric-setnacos-exception",children:"Metric set\uff1aNacos exception"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Metric name"}),(0,c.jsx)(n.th,{children:"Metric unit"}),(0,c.jsx)(n.th,{children:"Metric help description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_exception_total",(0,c.jsx)(n.code,{children:'{name="db"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"database exception"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_exception_total",(0,c.jsx)(n.code,{children:'{name="configNotify"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos config notify exception"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_exception_total",(0,c.jsx)(n.code,{children:'{name="unhealth"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos config server health check exception"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_exception_total",(0,c.jsx)(n.code,{children:'{name="disk"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming write disk exception"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_exception_total",(0,c.jsx)(n.code,{children:'{name="leaderSendBeatFailed"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos naming leader send heart beat fail count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_exception_total",(0,c.jsx)(n.code,{children:'{name="illegalArgument"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"request argument illegal count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_exception_total",(0,c.jsx)(n.code,{children:'{name="nacos"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"Nacos inner exception"})]})]})]}),"\n",(0,c.jsx)(n.h4,{id:"metric-setclient",children:"Metric set\uff1aclient"}),"\n",(0,c.jsxs)(n.table,{children:[(0,c.jsx)(n.thead,{children:(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.th,{children:"Metric name"}),(0,c.jsx)(n.th,{children:"Metric unit"}),(0,c.jsx)(n.th,{children:"Metric help description"})]})}),(0,c.jsxs)(n.tbody,{children:[(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="subServiceCount"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"subscribed services count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="pubServiceCount"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"published services count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsxs)(n.td,{children:["nacos_monitor",(0,c.jsx)(n.code,{children:'{name="configListenSize"}'})]}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"listened configuration file count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"nacos_client_request_seconds_count"}),(0,c.jsx)(n.td,{children:"none"}),(0,c.jsx)(n.td,{children:"request count"})]}),(0,c.jsxs)(n.tr,{children:[(0,c.jsx)(n.td,{children:"nacos_client_request_seconds_sum"}),(0,c.jsx)(n.td,{children:"second"}),(0,c.jsx)(n.td,{children:"request time"})]})]})]})]})}function a(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}},60056(e,n,s){s.d(n,{R:()=>r,x:()=>d});var t=s(30758);const c={},i=t.createContext(c);function r(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);