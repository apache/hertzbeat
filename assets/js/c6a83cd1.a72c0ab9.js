"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[476],{17019(e,n,t){t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"help/dynamic_tp","title":"Monitoring DynamicTp ThreadPool","description":"Collect and monitor the thread pool performance Metrics exposed by DynamicTp actuator.","source":"@site/versioned_docs/version-1.6.x/help/dynamic_tp.md","sourceDirName":"help","slug":"/help/dynamic_tp","permalink":"/docs/1.6.x/help/dynamic_tp","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/versioned_docs/version-1.6.x/help/dynamic_tp.md","tags":[],"version":"1.6.x","frontMatter":{"id":"dynamic_tp","title":"Monitoring DynamicTp ThreadPool","sidebar_label":"DynamicTp Monitor","keywords":["open source monitoring tool","open source dynamicTp monitoring tool","monitoring DynamicTp metrics"]},"sidebar":"docs","previous":{"title":"SpringBoot 3.0","permalink":"/docs/1.6.x/help/springboot3"},"next":{"title":"MySQL database","permalink":"/docs/1.6.x/help/mysql"}}');var r=t(86070),o=t(60056);const s={id:"dynamic_tp",title:"Monitoring DynamicTp ThreadPool",sidebar_label:"DynamicTp Monitor",keywords:["open source monitoring tool","open source dynamicTp monitoring tool","monitoring DynamicTp metrics"]},c=void 0,d={},l=[{value:"PreRequisites",id:"prerequisites",level:3},{value:"Configuration parameters",id:"configuration-parameters",level:3},{value:"Collect metrics",id:"collect-metrics",level:3},{value:"Metric collection: thread_pool",id:"metric-collection-thread_pool",level:4}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Collect and monitor the thread pool performance Metrics exposed by DynamicTp actuator."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"PreRequisites"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Integration Using ",(0,r.jsx)(n.code,{children:"DynamicTp"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"DynamicTp"})," is a lightweight dynamic thread pool based on the configuration center of the Jvm language. It has built-in monitoring and alarm functions, which can be realized through SPI custom extensions."]}),"\n",(0,r.jsxs)(n.p,{children:["For integrated use, please refer to the document ",(0,r.jsx)(n.a,{href:"https://dynamictp.cn/guide/use/quick-start.html",children:"Quick Start"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Open SpringBoot Actuator Endpoint to expose ",(0,r.jsx)(n.code,{children:"DynamicTp"})," Metric interface"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"management:\n   endpoints:\n     web:\n       exposure:\n         include: '*'\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Test whether the access Metric interface ",(0,r.jsx)(n.code,{children:"ip:port/actuator/dynamic-tp"})," has response json data as follows:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'[\n   {\n     "poolName": "commonExecutor",\n     "corePoolSize": 1,\n     "maximumPoolSize": 1,\n     "queueType": "LinkedBlockingQueue",\n     "queueCapacity": 2147483647,\n     "queueSize": 0,\n     "fair": false,\n     "queueRemainingCapacity": 2147483647,\n     "activeCount": 0,\n     "taskCount": 0,\n     "completedTaskCount": 0,\n     "largestPoolSize": 0,\n     "poolSize": 0,\n     "waitTaskCount": 0,\n     "rejectCount": 0,\n     "rejectHandlerName": null,\n     "dynamic": false,\n     "runTimeoutCount": 0,\n     "queueTimeoutCount": 0\n   },\n   {\n     "maxMemory": "4GB",\n     "totalMemory": "444MB",\n     "freeMemory": "250.34 MB",\n     "usableMemory": "3.81GB"\n   }\n]\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Add DynamicTp monitoring under HertzBeat middleware monitoring"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-parameters",children:"Configuration parameters"}),"\n",(0,r.jsx)(n.p,{children:"| Parameter name | Parameter help description |\n| ------------ |------------------------------------ ------------------|\n| Monitoring Host | The peer IPV4, IPV6 or domain name to be monitored. Note \u26a0\ufe0fWithout protocol header (eg: https://, http://). |\n| Monitoring name | The name that identifies this monitoring, and the name needs to be unique. |\n| Port | The port provided by the application service, the default is 8080. |\n| Enable HTTPS | Whether to access the website through HTTPS, note \u26a0\ufe0fEnable HTTPS, the default corresponding port needs to be changed to 443 |\n| Base Path | Exposed interface path prefix, default /actuator |\n| Acquisition Interval | Interval time for monitoring periodic data collection, in seconds, the minimum interval that can be set is 30 seconds |\n| Whether to detect | Whether to detect and check the availability of monitoring before adding monitoring, and the operation of adding and modifying will continue after the detection is successful |\n| Description Remarks | More remark information to identify and describe this monitoring, users can remark information here |"}),"\n",(0,r.jsx)(n.h3,{id:"collect-metrics",children:"Collect metrics"}),"\n",(0,r.jsx)(n.h4,{id:"metric-collection-thread_pool",children:"Metric collection: thread_pool"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Metric Name"}),(0,r.jsx)(n.th,{children:"Metric Unit"}),(0,r.jsx)(n.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"pool_name"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Thread pool name"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"core_pool_size"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Number of core threads"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"maximum_pool_size"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Maximum number of threads"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"queue_type"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Task queue type"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"queue_capacity"}),(0,r.jsx)(n.td,{children:"MB"}),(0,r.jsx)(n.td,{children:"task queue capacity"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"queue_size"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"The current occupied size of the task queue"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"fair"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Queue mode, SynchronousQueue will be used"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"queue_remaining_capacity"}),(0,r.jsx)(n.td,{children:"MB"}),(0,r.jsx)(n.td,{children:"task queue remaining size"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"active_count"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Number of active threads"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"task_count"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Total number of tasks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"completed_task_count"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Number of completed tasks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"largest_pool_size"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"The largest number of threads in history"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"pool_size"}),(0,r.jsx)(n.td,{children:"none"}),(0,r.jsx)(n.td,{children:"current number of threads"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"wait_task_count"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Number of tasks waiting to be executed"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"reject_count"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Number of rejected tasks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"reject_handler_name"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Reject policy type"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"dynamic"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Dynamic thread pool or not"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"run_timeout_count"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Number of running timeout tasks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"queue_timeout_count"}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"Number of tasks waiting for timeout"})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},60056(e,n,t){t.d(n,{R:()=>s,x:()=>c});var i=t(30758);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);