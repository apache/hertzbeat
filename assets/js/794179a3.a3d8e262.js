"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[98838],{49507(e,t,r){r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"help/kafka_promql","title":"Monitoring Kafka-PromQL","description":"Monitor Kafka by querying generic metrics data from Prometheus server using Prometheus PromQL. This approach is suitable when Prometheus is already monitoring Kafka and you need to fetch Kafka\'s","source":"@site/versioned_docs/version-1.8.0/help/kafka_promql.md","sourceDirName":"help","slug":"/help/kafka_promql","permalink":"/docs/help/kafka_promql","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/versioned_docs/version-1.8.0/help/kafka_promql.md","tags":[],"version":"1.8.0","frontMatter":{"id":"kafka_promql","title":"Monitoring Kafka-PromQL","sidebar_label":"Kafka-PromQL","keywords":["Open Source Monitoring System","Open Source Middleware Monitoring","Kafka Monitoring","Kafka-PromQL Monitoring"]},"sidebar":"docs","previous":{"title":"Huawei switch","permalink":"/docs/help/huawei_switch"},"next":{"title":"InfluxDB-PromQL","permalink":"/docs/help/influxdb_promql"}}');var n=r(86070),s=r(60056);const o={id:"kafka_promql",title:"Monitoring Kafka-PromQL",sidebar_label:"Kafka-PromQL",keywords:["Open Source Monitoring System","Open Source Middleware Monitoring","Kafka Monitoring","Kafka-PromQL Monitoring"]},d=void 0,c={},a=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Configuration Parameters",id:"configuration-parameters",level:3},{value:"Metrics Collection",id:"metrics-collection",level:3},{value:"Metric Set: kafka_brokers",id:"metric-set-kafka_brokers",level:4},{value:"Metric Set: kafka_topic_partitions",id:"metric-set-kafka_topic_partitions",level:4},{value:"Metric Set: kafka_server_brokertopicmetrics_bytesinpersec",id:"metric-set-kafka_server_brokertopicmetrics_bytesinpersec",level:4},{value:"Other Kafka Monitoring Methods Supported by HertzBeat",id:"other-kafka-monitoring-methods-supported-by-hertzbeat",level:3}];function l(e){const t={a:"a",blockquote:"blockquote",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:"Monitor Kafka by querying generic metrics data from Prometheus server using Prometheus PromQL. This approach is suitable when Prometheus is already monitoring Kafka and you need to fetch Kafka's\nmonitoring data from Prometheus server."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Deploy Kafka."}),"\n",(0,n.jsx)(t.li,{children:"Deploy kafka_exporter."}),"\n",(0,n.jsx)(t.li,{children:"Collect monitoring metrics exposed by kafka_exporter through Prometheus."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"configuration-parameters",children:"Configuration Parameters"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Parameter Name"}),(0,n.jsx)(t.th,{children:"Parameter Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Monitoring Host"}),(0,n.jsx)(t.td,{children:"IP, IPv6, or domain name of the target being monitored. Note \u26a0\ufe0f: Do not include protocol header (e.g., https://, http://)."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Monitoring name"}),(0,n.jsx)(t.td,{children:"Name to identify this monitoring, ensuring uniqueness of names."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Port"}),(0,n.jsx)(t.td,{children:"Prometheus API port, default: 9090."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Relative path"}),(0,n.jsx)(t.td,{children:"Relative path of Prometheus to query PromQL, default: /api/v1/query"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Request mode"}),(0,n.jsx)(t.td,{children:"Set the request method for API calls: GET, POST, PUT, DELETE, default: GET"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Enable HTTPS"}),(0,n.jsx)(t.td,{children:"Whether to access the website via HTTPS, note \u26a0\ufe0f: enabling HTTPS generally requires changing the corresponding port to 443"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Username"}),(0,n.jsx)(t.td,{children:"Username for Basic or Digest authentication when accessing the API."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Password"}),(0,n.jsx)(t.td,{children:"Password for Basic or Digest authentication when accessing the API."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Content-Type"}),(0,n.jsx)(t.td,{children:"Resource type when carrying BODY request data."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Request BODY"}),(0,n.jsx)(t.td,{children:"Set the BODY request data, effective for PUT and POST request methods."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Collection interval"}),(0,n.jsx)(t.td,{children:"Interval for periodic data collection in seconds, the minimum interval that can be set is 30 seconds"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Description remarks"}),(0,n.jsx)(t.td,{children:"Additional remarks and descriptions for this monitoring. Users can add notes here."})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"metrics-collection",children:"Metrics Collection"}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-kafka_brokers",children:"Metric Set: kafka_brokers"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Metric Name"}),(0,n.jsx)(t.th,{children:"Metric Unit"}),(0,n.jsx)(t.th,{children:"Metric help description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"name"})}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Metric name"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"instance"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Instance to which the metric belongs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"timestamp"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Timestamp of metric collection"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"value"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Metric value"})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-kafka_topic_partitions",children:"Metric Set: kafka_topic_partitions"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Metric Name"}),(0,n.jsx)(t.th,{children:"Metric Unit"}),(0,n.jsx)(t.th,{children:"Metric help description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"name"})}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Metric name"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"instance"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Instance to which the metric belongs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"timestamp"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Timestamp of metric collection"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"value"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Metric value"})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"metric-set-kafka_server_brokertopicmetrics_bytesinpersec",children:"Metric Set: kafka_server_brokertopicmetrics_bytesinpersec"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Metric Name"}),(0,n.jsx)(t.th,{children:"Metric Unit"}),(0,n.jsx)(t.th,{children:"Metric help description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.strong,{children:"name"})}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Metric name"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"instance"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Instance to which the metric belongs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"timestamp"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Timestamp of metric collection"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"value"}),(0,n.jsx)(t.td,{children:"None"}),(0,n.jsx)(t.td,{children:"Metric value"})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"other-kafka-monitoring-methods-supported-by-hertzbeat",children:"Other Kafka Monitoring Methods Supported by HertzBeat"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["If Kafka is enabled with JMX monitoring, you can use ",(0,n.jsx)(t.a,{href:"kafka",children:"Kafka"})," Monitoring."]}),"\n",(0,n.jsxs)(t.li,{children:["If Kafka cluster deploys kafka_exporter to expose monitoring metrics, you can refer to ",(0,n.jsx)(t.a,{href:"prometheus",children:"Prometheus task"})," to configure the Prometheus collection task to monitor kafka."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},60056(e,t,r){r.d(t,{R:()=>o,x:()=>d});var i=r(30758);const n={},s=i.createContext(n);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);