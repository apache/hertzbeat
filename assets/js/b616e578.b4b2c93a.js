"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[99789],{45906:(e,t,i)=>{i.d(t,{R:()=>c,x:()=>d});var n=i(30758);const r={},s=n.createContext(r);function c(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),n.createElement(s.Provider,{value:t},e.children)}},54149:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"help/iotdb","title":"Monitoring Apache IoTDB Database","description":"Monitor the running status of the Apache IoTDB Internet of Things time series database (JVM-related), memory task clusters and other related Metrics.","source":"@site/versioned_docs/version-1.7.x/help/iotdb.md","sourceDirName":"help","slug":"/help/iotdb","permalink":"/docs/help/iotdb","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/versioned_docs/version-1.7.x/help/iotdb.md","tags":[],"version":"1.7.x","frontMatter":{"id":"iotdb","title":"Monitoring Apache IoTDB Database","sidebar_label":"IoTDB Database","keywords":["open source monitoring tool","open source database monitoring tool","monitoring IotDB database metrics"]},"sidebar":"docs","previous":{"title":"InfluxDB Database","permalink":"/docs/help/influxdb"},"next":{"title":"PrestoDB Database","permalink":"/docs/help/presto"}}');var r=i(86070),s=i(45906);const c={id:"iotdb",title:"Monitoring Apache IoTDB Database",sidebar_label:"IoTDB Database",keywords:["open source monitoring tool","open source database monitoring tool","monitoring IotDB database metrics"]},d=void 0,o={},l=[{value:"Operation before monitoring",id:"operation-before-monitoring",level:2},{value:"Configuration parameters",id:"configuration-parameters",level:3},{value:"Collect metrics",id:"collect-metrics",level:3},{value:"Metric collection: cluster_node_status",id:"metric-collection-cluster_node_status",level:4},{value:"Metric collection: jvm_memory_committed_bytes",id:"metric-collection-jvm_memory_committed_bytes",level:4},{value:"Metric collection: jvm_memory_used_bytes",id:"metric-collection-jvm_memory_used_bytes",level:4},{value:"Metric collection: jvm_threads_states_threads",id:"metric-collection-jvm_threads_states_threads",level:4},{value:"Index collection: quantity business data",id:"index-collection-quantity-business-data",level:4},{value:"Metric collection: cache_hit cache",id:"metric-collection-cache_hit-cache",level:4},{value:"Metric collection: queue task queue",id:"metric-collection-queue-task-queue",level:4},{value:"Metric collection: thrift_connections",id:"metric-collection-thrift_connections",level:4}];function h(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.blockquote,{children:["\n",(0,r.jsx)(t.p,{children:"Monitor the running status of the Apache IoTDB Internet of Things time series database (JVM-related), memory task clusters and other related Metrics."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"operation-before-monitoring",children:"Operation before monitoring"}),"\n",(0,r.jsxs)(t.p,{children:["You need to enable the ",(0,r.jsx)(t.code,{children:"metrics"})," function in IoTDB, which will provide interface data in the form of prometheus metrics."]}),"\n",(0,r.jsxs)(t.p,{children:["To enable the ",(0,r.jsx)(t.code,{children:"metrics"})," function, refer to ",(0,r.jsx)(t.a,{href:"https://iotdb.apache.org/UserGuide/V0.13.x/Maintenance-Tools/Metric-Tool.html",children:"Official Documentation"})]}),"\n",(0,r.jsx)(t.p,{children:"The main steps are as follows:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["The metric collection is disabled by default, you need to modify the parameters in ",(0,r.jsx)(t.code,{children:"conf/iotdb-metric.yml"})," first, then restart the server"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"# Whether to start the monitoring module, the default is false\nenableMetric: true\n\n# Whether to enable operation delay statistics\nenablePerformanceStat: false\n\n# Data provision method, externally provide metrics data through jmx and prometheus protocol, optional parameters: [JMX, PROMETHEUS, IOTDB], IOTDB is closed by default.\nmetricReporterList:\n   - JMX\n   - PROMETHEUS\n\n# The metric architecture used at the bottom layer, optional parameters: [MICROMETER, DROPWIZARD]\nmonitorType: MICROMETER\n\n# Initialize the level of the metric, optional parameters: [CORE, IMPORTANT, NORMAL, ALL]\nmetricLevel: IMPORTANT\n\n# Predefined metrics set, optional parameters: [JVM, LOGBACK, FILE, PROCESS, SYSTEM]\npredefinedMetrics:\n   - JVM\n   - FILE\n"})}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Restart IoTDB, open a browser or use curl to access http://servier_ip:9091/metrics, and you can see the metric data."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Add the corresponding IoTDB monitoring in HertzBeat."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"configuration-parameters",children:"Configuration parameters"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter name"}),(0,r.jsx)(t.th,{children:"Parameter help description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Monitoring Host"}),(0,r.jsx)(t.td,{children:"The peer IPV4, IPV6 or domain name to be monitored. Note \u26a0\ufe0fWithout protocol header (eg: https://, http://)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Monitoring name"}),(0,r.jsx)(t.td,{children:"The name that identifies this monitoring, and the name needs to be unique."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Port"}),(0,r.jsx)(t.td,{children:"The port provided by the IoTDB Metric interface, which is 9091 by default."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Timeout"}),(0,r.jsx)(t.td,{children:"HTTP request query timeout"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Acquisition Interval"}),(0,r.jsx)(t.td,{children:"Interval time for monitoring periodic data collection, in seconds, the minimum interval that can be set is 30 seconds"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Whether to detect"}),(0,r.jsx)(t.td,{children:"Whether to detect and check the availability of monitoring before adding monitoring, and the operation of adding and modifying will continue after the detection is successful"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Description Remarks"}),(0,r.jsx)(t.td,{children:"More remark information to identify and describe this monitoring, users can remark information here"})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"collect-metrics",children:"Collect metrics"}),"\n",(0,r.jsx)(t.h4,{id:"metric-collection-cluster_node_status",children:"Metric collection: cluster_node_status"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"name"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Node name IP"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"status"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Node status, 1=online 2=offline"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"metric-collection-jvm_memory_committed_bytes",children:"Metric collection: jvm_memory_committed_bytes"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"area"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"heap memory or nonheap memory"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"id"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"memory block"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"value"}),(0,r.jsx)(t.td,{children:"MB"}),(0,r.jsx)(t.td,{children:"The memory size currently requested by the JVM"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"metric-collection-jvm_memory_used_bytes",children:"Metric collection: jvm_memory_used_bytes"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"area"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"heap memory or nonheap memory"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"id"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"memory block"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"value"}),(0,r.jsx)(t.td,{children:"MB"}),(0,r.jsx)(t.td,{children:"JVM used memory size"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"metric-collection-jvm_threads_states_threads",children:"Metric collection: jvm_threads_states_threads"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"state"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"thread state"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"count"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"The number of threads corresponding to the thread state"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"index-collection-quantity-business-data",children:"Index collection: quantity business data"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"name"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Business name timeSeries/storageGroup/device/deviceUsingTemplate"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"type"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"type total/normal/template/template"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"value"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"The current timeSeries/storageGroup/device/The number of devices that have activated the template"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"metric-collection-cache_hit-cache",children:"Metric collection: cache_hit cache"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"name"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Cache name chunk/timeSeriesMeta/bloomFilter"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"value"}),(0,r.jsx)(t.td,{children:"%"}),(0,r.jsx)(t.td,{children:"chunk/timeSeriesMeta cache hit rate, bloomFilter interception rate"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"metric-collection-queue-task-queue",children:"Metric collection: queue task queue"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"name"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Queue name compaction_inner/compaction_cross/flush"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"status"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"status running/waiting"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"value"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"Number of tasks at current time"})]})]})]}),"\n",(0,r.jsx)(t.h4,{id:"metric-collection-thrift_connections",children:"Metric collection: thrift_connections"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Metric Name"}),(0,r.jsx)(t.th,{children:"Metric Unit"}),(0,r.jsx)(t.th,{children:"Metric Help Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"name"}),(0,r.jsx)(t.td,{children:"None"}),(0,r.jsx)(t.td,{children:"name"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"connection"}),(0,r.jsx)(t.td,{children:"none"}),(0,r.jsx)(t.td,{children:"thrift current connection number"})]})]})]})]})}function a(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);