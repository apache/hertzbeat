"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[8185],{44525:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>o,contentTitle:()=>l,default:()=>a,frontMatter:()=>d,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"help/alert_threshold_expr","title":"Threshold Trigger Expression","description":"When configuring threshold alerts, it is necessary to set up threshold trigger expressions. The system calculates whether to trigger an alert based on the expression and the monitored metric values. Here, we provide a detailed explanation of expression usage.","source":"@site/docs/help/alert_threshold_expr.md","sourceDirName":"help","slug":"/help/alert_threshold_expr","permalink":"/docs/next/help/alert_threshold_expr","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/docs/help/alert_threshold_expr.md","tags":[],"version":"current","frontMatter":{"id":"alert_threshold_expr","title":"Threshold Trigger Expression","sidebar_label":"Threshold Trigger Expression"},"sidebar":"docs","previous":{"title":"Alarm Threshold","permalink":"/docs/next/help/alert_threshold"},"next":{"title":"Alarm Grouping","permalink":"/docs/next/help/alarm_group"}}');var n=s(86070),i=s(45906);const d={id:"alert_threshold_expr",title:"Threshold Trigger Expression",sidebar_label:"Threshold Trigger Expression"},l=void 0,o={},h=[{value:"Supported Operators in Expressions",id:"supported-operators-in-expressions",level:4},{value:"Expression Function Library List",id:"expression-function-library-list",level:4},{value:"Supported Environment Variables",id:"supported-environment-variables",level:4},{value:"Expression Configuration Examples",id:"expression-configuration-examples",level:4}];function c(e){const r={a:"a",blockquote:"blockquote",code:"code",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsx)(r.p,{children:"When configuring threshold alerts, it is necessary to set up threshold trigger expressions. The system calculates whether to trigger an alert based on the expression and the monitored metric values. Here, we provide a detailed explanation of expression usage."}),"\n"]}),"\n",(0,n.jsx)(r.h4,{id:"supported-operators-in-expressions",children:"Supported Operators in Expressions"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Operator (Visual Configuration)"}),(0,n.jsx)(r.th,{children:"Operator (Expression Configuration)"}),(0,n.jsx)(r.th,{children:"Supported Types"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Equals"}),(0,n.jsx)(r.td,{children:"equals(str1,str2)"}),(0,n.jsx)(r.td,{children:"String"}),(0,n.jsx)(r.td,{children:"Check if strings are equal"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Not Equals"}),(0,n.jsx)(r.td,{children:"!equals(str1,str2)"}),(0,n.jsx)(r.td,{children:"String"}),(0,n.jsx)(r.td,{children:"Check if strings are not equal"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Contains"}),(0,n.jsx)(r.td,{children:"contains(str1,str2)"}),(0,n.jsx)(r.td,{children:"String"}),(0,n.jsx)(r.td,{children:"Check if string contains"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Not Contains"}),(0,n.jsx)(r.td,{children:"!contains(str1,str2)"}),(0,n.jsx)(r.td,{children:"String"}),(0,n.jsx)(r.td,{children:"Check if string does not contain"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Matches"}),(0,n.jsx)(r.td,{children:"matches(str1,str2)"}),(0,n.jsx)(r.td,{children:"String"}),(0,n.jsx)(r.td,{children:"Check if string matches regex"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Not Matches"}),(0,n.jsx)(r.td,{children:"!matches(str1,str2)"}),(0,n.jsx)(r.td,{children:"String"}),(0,n.jsx)(r.td,{children:"Check if string does not match regex"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Exists"}),(0,n.jsx)(r.td,{children:"exists(obj)"}),(0,n.jsx)(r.td,{children:"String, Numeric, Time"}),(0,n.jsx)(r.td,{children:"Check if value exists"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Not Exists"}),(0,n.jsx)(r.td,{children:"!exists(obj)"}),(0,n.jsx)(r.td,{children:"String, Numeric, Time"}),(0,n.jsx)(r.td,{children:"Check if value does not exist"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Greater than"}),(0,n.jsx)(r.td,{children:"obj1 > obj2"}),(0,n.jsx)(r.td,{children:"Numeric, Time"}),(0,n.jsx)(r.td,{children:"Check if value is greater than"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Less than"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"obj1 < obj2"})}),(0,n.jsx)(r.td,{children:"Numeric, Time"}),(0,n.jsx)(r.td,{children:"Check if value is less than"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Greater than or Equal to"}),(0,n.jsx)(r.td,{children:"obj1 >= obj2"}),(0,n.jsx)(r.td,{children:"Numeric, Time"}),(0,n.jsx)(r.td,{children:"Check if value is greater than or equal to"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Less than or Equal to"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"obj1 <= obj2"})}),(0,n.jsx)(r.td,{children:"Numeric, Time"}),(0,n.jsx)(r.td,{children:"Check if value is less than or equal to"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Not Equal to"}),(0,n.jsx)(r.td,{children:"obj1 != obj2"}),(0,n.jsx)(r.td,{children:"Numeric, Time"}),(0,n.jsx)(r.td,{children:"Check if values are not equal"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Equal to"}),(0,n.jsx)(r.td,{children:"obj1 == obj2"}),(0,n.jsx)(r.td,{children:"Numeric, Time"}),(0,n.jsx)(r.td,{children:"Check if values are equal"})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"expression-function-library-list",children:"Expression Function Library List"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Supported Function Library"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"condition ? trueExpression : falseExpression"}),(0,n.jsx)(r.td,{children:"Ternary operator"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"toDouble(str)"}),(0,n.jsx)(r.td,{children:"Convert string to Double type"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"toBoolean(str)"}),(0,n.jsx)(r.td,{children:"Convert string to Boolean type"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"toInteger(str)"}),(0,n.jsx)(r.td,{children:"Convert string to Integer type"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"array[n]"}),(0,n.jsx)(r.td,{children:"Retrieve the nth element of an array"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"*"}),(0,n.jsx)(r.td,{children:"Multiplication"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"/"}),(0,n.jsx)(r.td,{children:"Division"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"%"}),(0,n.jsx)(r.td,{children:"Modulo"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"( and )"}),(0,n.jsx)(r.td,{children:"Parentheses for controlling the order of operations in logical or mathematical expressions"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"+"}),(0,n.jsx)(r.td,{children:"Addition"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"-"}),(0,n.jsx)(r.td,{children:"Subtraction"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"&&"}),(0,n.jsx)(r.td,{children:"Logical AND operator"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"||"}),(0,n.jsx)(r.td,{children:"Logical OR operator"})]})]})]}),"\n",(0,n.jsx)(r.h4,{id:"supported-environment-variables",children:"Supported Environment Variables"}),"\n",(0,n.jsxs)(r.blockquote,{children:["\n",(0,n.jsx)(r.p,{children:"Environment variables refer to variables supported by metric values, used in expressions. During threshold calculation and judgment, these variables will be replaced with actual values."}),"\n"]}),"\n",(0,n.jsxs)(r.p,{children:["Non-fixed Environment Variables: These variables change dynamically based on the selected monitoring metric. For example, if we choose ",(0,n.jsx)(r.strong,{children:"response time metric for website monitoring"}),", the environment variable would be ",(0,n.jsx)(r.code,{children:"responseTime - this represents response time variable"}),". If we want to set an alert trigger for ",(0,n.jsx)(r.strong,{children:"response time greater than 400 for website monitoring"}),", the expression would be ",(0,n.jsx)(r.code,{children:"responseTime>400"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["Fixed Environment Variables (Less commonly used): ",(0,n.jsx)(r.code,{children:"instance: instance value"}),"\nThis variable is mainly used for calculations involving multiple instances. For instance, if we collect usage metrics for C drive and D drive (",(0,n.jsx)(r.code,{children:"usage"})," being a non-fixed environment variable), and we only want to set an alert for ",(0,n.jsx)(r.strong,{children:"usage greater than 80 for the C drive"}),", the expression would be ",(0,n.jsx)(r.code,{children:'equals(instance,"c")&&usage>80'}),"."]}),"\n",(0,n.jsx)(r.h4,{id:"expression-configuration-examples",children:"Expression Configuration Examples"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["Website Monitoring -> Alert when response time is greater than or equal to 400ms\n",(0,n.jsx)(r.code,{children:"responseTime>=400"})]}),"\n",(0,n.jsxs)(r.li,{children:["API Monitoring -> Alert when response time is greater than 3000ms\n",(0,n.jsx)(r.code,{children:"responseTime>3000"})]}),"\n",(0,n.jsxs)(r.li,{children:["Overall Monitoring -> Alert when response time for URL (instance) path '",(0,n.jsx)(r.a,{href:"https://baidu.com",children:"https://baidu.com"}),"' is greater than 200ms\n",(0,n.jsx)(r.code,{children:'equals(instance,"https://baidu.com")&&responseTime>200'})]}),"\n",(0,n.jsxs)(r.li,{children:["MYSQL Monitoring -> Alert when 'threads_running' metric under 'status' exceeds 7\n",(0,n.jsx)(r.code,{children:"threads_running>7"})]}),"\n"]}),"\n",(0,n.jsx)(r.p,{children:"If you encounter any issues, feel free to discuss and provide feedback through our community group or ISSUE tracker!"})]})}function a(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},45906:(e,r,s)=>{s.d(r,{R:()=>d,x:()=>l});var t=s(30758);const n={},i=t.createContext(n);function d(e){const r=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);