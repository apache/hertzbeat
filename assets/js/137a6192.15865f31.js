"use strict";(globalThis.webpackChunkhertzbeat=globalThis.webpackChunkhertzbeat||[]).push([[95857],{75487(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"start/questdb-init","title":"Installation and Initialization of Time-Series Database Service QuestDB (Optional)","description":"The historical data storage of Apache HertzBeat\u2122 relies on a time-series database. You can choose to install and initialize one of the supported databases, or skip the installation (\u26a0\ufe0f However, it is strongly recommended to configure one in the production environment).","source":"@site/docs/start/questdb-init.md","sourceDirName":"start","slug":"/start/questdb-init","permalink":"/docs/next/start/questdb-init","draft":false,"unlisted":false,"editUrl":"https://github.com/apache/hertzbeat/edit/master/home/docs/start/questdb-init.md","tags":[],"version":"current","frontMatter":{"id":"questdb-init","title":"Installation and Initialization of Time-Series Database Service QuestDB (Optional)","sidebar_label":"Metric Data Storage - QuestDB"}}');var i=n(86070),a=n(60056);const r={id:"questdb-init",title:"Installation and Initialization of Time-Series Database Service QuestDB (Optional)",sidebar_label:"Metric Data Storage - QuestDB"},o=void 0,l={},d=[{value:"Install QuestDB",id:"install-questdb",level:3}];function c(e){const t={blockquote:"blockquote",code:"code",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["The historical data storage of Apache HertzBeat\u2122 relies on a time-series database. You can choose to install and initialize ",(0,i.jsx)(t.strong,{children:"one"})," of the supported databases, or skip the installation (\u26a0\ufe0f However, it is strongly recommended to configure one in the production environment)."]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"We recommend using and providing long-term support for VictoriaMetrics as the storage solution."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"QuestDB is an open-source time-series database that stands out in the field of time-series data processing due to its high performance and low latency. We use it to store and analyze the collected historical monitoring metric data."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"\u26a0\ufe0f Note: Configuring a time-series database is optional, but it is strongly recommended for production environments to ensure more comprehensive historical chart functions, high performance, and stability."})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"\u26a0\ufe0f If no time-series database is configured, only the historical data of the last hour will be retained."})}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsx)(t.p,{children:"If you already have an existing QuestDB environment, you can skip directly to the YML configuration step."}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"install-questdb",children:"Install QuestDB"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Download the installation package"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"\u200b Download the latest version for your operating system from the official GitHub repository:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"# For Linux/macOS (taking v7.3.9 as an example; replace with the latest version number)\nwget https://github.com/questdb/questdb/releases/download/7.3.9/questdb-7.3.9-no-jre-bin.tar.gz\n\n# Extract the package\ntar -zxvf questdb-7.3.9-no-jre-bin.tar.gz\nmv questdb-7.3.9 /opt/questdb  # Move to a common directory\n"})}),"\n",(0,i.jsx)(t.p,{children:"\u200b For Windows users:"}),"\n",(0,i.jsx)(t.p,{children:"\u200b Download the zip package and extract it to C:\\questdb or a custom directory."}),"\n",(0,i.jsxs)(t.ol,{start:"2",children:["\n",(0,i.jsx)(t.li,{children:"Start QuestDB"}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"# For Linux/macOS: Navigate to the installation directory and start the service\ncd /opt/questdb/bin\n./questdb start\n\n# For Windows (Command Prompt):\ncd C:\\questdb\\bin\nquestdb.exe start\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"3",children:["\n",(0,i.jsx)(t.li,{children:"Set up access password"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"\u200b QuestDB enables authentication through a configuration file, which needs to be modified manually."}),"\n",(0,i.jsx)(t.p,{children:"\u200b Edit the configuration file:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"# For Linux/macOS\nvi /opt/questdb/conf/server.conf\n\n# For Windows\nnotepad C:\\questdb\\conf\\server.conf\n"})}),"\n",(0,i.jsx)(t.p,{children:"\u200b Enable authentication and configure the password:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"# Enable authentication (disabled by default)\nhttp.security.enabled=true\npg.security.enabled=true  # PostgreSQL protocol authentication\n\n# Set admin account and password (customize as needed)\nhttp.security.admin.username=admin\nhttp.security.admin.password=YourStrongPassword123!\n\n# Optional: Restrict Web Console access to specific IPs (e.g., local access only)\nhttp.bind.to=127.0.0.1:9000\n"})}),"\n",(0,i.jsx)(t.p,{children:"\u200b Restart QuestDB for the changes to take effect:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"# For Linux/macOS\n./questdb stop\n./questdb start\n\n# For Windows\nquestdb.exe stop\nquestdb.exe start\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"4",children:["\n",(0,i.jsx)(t.li,{children:"Configure QuestDB connection in HertzBeat's application.yml file"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"\u200b Modify HertzBeat's configuration file"}),"\n",(0,i.jsx)(t.p,{children:"\u200b Locate and edit the configuration file at hertzbeat/config/application.yml"}),"\n",(0,i.jsx)(t.p,{children:"\u200b \u26a0\ufe0f Note: For Docker container deployment, you need to mount the application.yml file to the host machine. For the installation package deployment, simply extract the package and modify the file at hertzbeat/config/application.yml."}),"\n",(0,i.jsxs)(t.p,{children:["\u200b ",(0,i.jsx)(t.strong,{children:"Set the"})," ",(0,i.jsx)(t.strong,{children:"warehouse.store.jpa.enabled"})," ",(0,i.jsx)(t.strong,{children:"parameter to"})," ",(0,i.jsx)(t.strong,{children:"false"}),"**, configure the** ",(0,i.jsx)(t.strong,{children:"warehouse.store.questdb"})," ",(0,i.jsx)(t.strong,{children:"data source parameters (HOST, username, password, etc.), and set"})," ",(0,i.jsx)(t.strong,{children:"enabled"})," ",(0,i.jsx)(t.strong,{children:"to"})," ",(0,i.jsx)(t.strong,{children:"true"})," ",(0,i.jsx)(t.strong,{children:"to enable QuestDB."})]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"warehouse:\n  store:\n    # Disable the default JPA\n    jpa:\n      enabled: false\n    # Enable QuestDB\n    questdb:\n      enabled: true\n      url: localhost:9000\n      username: admin\n      password: quest\n"})}),"\n",(0,i.jsx)(t.p,{children:"Parameter Description:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Parameter Name"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"enabled"}),(0,i.jsx)(t.td,{children:"Whether to enable QuestDB"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"url"}),(0,i.jsxs)(t.td,{children:["QuestDB server URL (host",":port",")"]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"username"}),(0,i.jsx)(t.td,{children:"QuestDB database account"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"password"}),(0,i.jsx)(t.td,{children:"QuestDB database password"})]})]})]}),"\n",(0,i.jsxs)(t.blockquote,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Note:"})," Due to QuestDB's architectural design, if you need to set an expiration time for data, you can configure it in QuestDB's configuration file server.conf:"]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:"cairo.default.ttl=30d\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"5",children:["\n",(0,i.jsx)(t.li,{children:"Restart HertzBeat"}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},60056(e,t,n){n.d(t,{R:()=>r,x:()=>o});var s=n(30758);const i={},a=s.createContext(i);function r(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);